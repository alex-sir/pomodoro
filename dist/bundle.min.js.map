{"version":3,"sources":["bundle.min.js"],"names":["countdown","timer","document","querySelector","timerStarted","play","pause","stop","reset","arrow","querySelectorAll","pomodoros","pomodorosCount","sessionTitle","increaseSession","sessionMinutes","sessionSeconds","parseInt","textContent","breakTitle","decreaseSession","increaseBreak","breakMinutes","decreaseBreak","customThemeSwitch","autoStart","breakSelected","sessionTimeSelected","breakTimeSelected","longBreak","timerDisplay","seconds","breakTime","returnRunTimerDisplay","runTimerDisplay","clearInterval","disabled","forEach","then","Date","now","displayTimeLeft","setInterval","secondsLeft","Math","round","checked","currentActive","titleBorderChange","pomodoro","customThemeActive","setAttribute","customValueBody","customValueContent","classList","remove","split","click","add","min","addEventListener","e","keyCode","repeat","pauseTimer","sessionBreakSelect","sessionTime","runSessionSelect","stopTimerHard","runBreakSelect","shiftKey","style","background","backgroundSize","backgroundPosition","length","toggle","timerSession","increase","minutes","decrease","session","runIncrease","isThroughKey","runDecrease","title","floor","remainderSeconds","display","hours","toString","padStart","clickRun","runPauseTimer","breakSessionTitleReset","stopTimer","runStopTimer","resetPomodoros","backgroundColor","pomodoroBorder","resetTimer","runResetTimer","mainTimer","window","onload","modalSettings","modalAbout","modalBtnSettings","modalBtnAbout","closeBtnSettings","closeBtnAbout","settings","about","modalDisplaySettings","modal","modalBtn","closeBtn","visibility","opacity","transform","body","overflow","blur","hideModalSettings","target","setTimeout","modalDisplayAbout","hideModalAbout","mainModal","factory","define","amd","exports","module","require","jQuery","$","undefined","defaultOpts","beforeShow","noop","move","change","show","hide","color","flat","showInput","allowEmpty","showButtons","clickoutFiresChange","showInitial","showPalette","showPaletteOnly","hideAfterPaletteSelect","togglePaletteOnly","showSelectionPalette","localStorageKey","appendTo","maxSelectionSize","cancelText","chooseText","togglePaletteMoreText","togglePaletteLessText","clearText","noColorSelectedText","preferredFormat","className","containerClassName","replacerClassName","showAlpha","theme","palette","selectionPalette","offset","spectrums","IE","exec","navigator","userAgent","rgbaSupport","contains","str","substr","indexOf","createElement","cssText","replaceInput","join","markup","gradientFix","i","paletteTemplate","p","opts","html","current","tiny","tinycolor","c","toHsl","l","equals","formattedString","swatchStyle","toRgbString","toFilter","push","append","attr","spectrum","element","o","func","wait","debounce","timeout","callbackContext","extend","callbacks","bind","instanceOptions","resize","reflow","context","this","args","arguments","clearTimeout","apply","visible","isDragging","dragWidth","dragHeight","dragHelperHeight","slideHeight","alphaWidth","alphaSlideHelperWidth","slideHelperHeight","currentHue","currentSaturation","currentValue","currentAlpha","paletteArray","paletteLookup","slice","draggingClass","shiftMovementDirection","doc","ownerDocument","boundElement","container","addClass","pickerContainer","find","dragger","dragHelper","slider","slideHelper","alphaSliderInner","alphaSlider","alphaSlideHelper","textInput","paletteContainer","initialColorContainer","cancelButton","clearButton","chooseButton","toggleButton","isInput","is","isInputTypeColor","inputTypeColorSupport","shouldReplace","replacer","offsetElement","previewElement","initialColor","val","colorOnShow","currentPreferredFormat","isEmpty","applyOptions","text","isArray","j","rgb","toggleClass","updateSelectionPaletteFromStorage","localStorage","oldPalette","each","addColorToSelectionPalette","inArray","shift","drawPalette","currentColor","get","map","unique","reverse","getUniqueSelectionPalette","drawInitial","initial","dragStart","trigger","dragStop","removeClass","setFromTextInput","value","isValid","set","updateOriginalInput","event","Event","isDefaultPrevented","hideAll","onkeydown","clickout","updateUI","button","revert","unbind","ignoreFormatChange","newColor","newHsv","toHsv","h","s","v","a","getFormat","fromRatio","format","updateHelperLocations","flatColor","css","toHexString","realColor","displayColor","realHex","realRgb","alpha","toRgb","realAlpha","gradient","gradientType","dragX","dragY","max","top","left","alphaX","slideY","fireCallback","hasChanged","picker","input","dpWidth","dpHeight","inputHeight","docElem","viewWidth","viewHeight","width","height","outerWidth","outerHeight","documentElement","clientWidth","scrollLeft","clientHeight","scrollTop","abs","disable","after","parent","paletteElementClick","data","ignore","closest","stopPropagation","preventDefault","keydown","hasClass","draggable","parseFloat","oldDragX","oldDragY","furtherFromX","setValue","paletteEvent","delegate","initialize","spect","option","optionName","optionValue","enable","coord","destroy","id","obj","Array","prototype","call","concat","onmove","onstart","onstop","dragging","maxHeight","maxWidth","hasTouch","duringDragEvents","prevent","returnValue","documentMode","t0","originalEvent","touches","pageX","pageY","which","fn","extra","method","Error","removeData","load","loadOpts","defaults","_cachedResult","colorInput","type","localization","palettes","processNativeColorInputs","colorInputs","trimLeft","trimRight","tinyCounter","math","mathRound","mathMin","mathMax","mathRandom","random","r","g","b","ok","replace","toLowerCase","match","named","names","matchers","rgba","hsl","hsla","hsv","hsva","hex8","parseIntFromHex","hex6","hex3","stringInputToObject","hasOwnProperty","bound01","String","convertToPercentage","f","q","t","mod","hsvToRgb","hue2rgb","hslToRgb","boundAlpha","inputToRGB","_originalInput","_r","_g","_b","_a","_roundA","_format","_gradientType","_ok","_tc_id","rgbToHsl","d","rgbToHsv","rgbToHex","allow3Char","hex","pad2","charAt","rgbaToHex","desaturate","amount","clamp01","saturate","greyscale","lighten","brighten","darken","spin","hue","complement","triad","tetrad","splitcomplement","analogous","results","slices","part","ret","monochromatic","modification","isDark","getBrightness","isLight","getOriginalInput","getAlpha","setAlpha","toHsvString","toHslString","toHex","toHex8","toHex8String","toPercentageRgb","toPercentageRgbString","toName","hexNames","secondColor","hex8String","secondHex8String","formatSet","hasAlpha","_applyModification","_applyCombination","color1","color2","mix","w1","rgb1","rgb2","w","w2","readability","c1","c2","brightnessA","brightnessB","colorDiff","brightness","isReadable","mostReadable","baseColor","colorList","bestColor","bestScore","bestIsReadable","readable","score","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","flipped","flip","isNaN","n","isOnePointZero","processPercent","isPercentage","CSS_UNIT","PERMISSIVE_MATCH3","PERMISSIVE_MATCH4","RegExp","themes","themeColor","themeBackground","themeBorder","themeActive","themeTitle","themeWarningBackground","acceptRestart","declineRestart","applyCustomTheme","colorPicker","on","timerRestartThemeCustom","customThemeChanger","titleBorderColor","bodyValue","contentValue","removeCustomTheme","fullRemove","borderColor","timerRestartTheme","accept","decline","themeWarning","executeChangeTheme","changeTheme","customThemeReset","mainThemes"],"mappings":"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","file":"bundle.min.js","sourcesContent":["let countdown;\r\nconst timer = document.querySelector('#timer');\r\nlet timerStarted = false;\r\nconst play = document.querySelector('#play');\r\nconst pause = document.querySelector('#pause');\r\nconst stop = document.querySelector('#stop');\r\nconst reset = document.querySelector('#reset');\r\nconst arrow = document.querySelectorAll('.arrow');\r\nconst pomodoros = document.querySelectorAll('.pomodoro');\r\nlet pomodorosCount = 0;\r\nconst sessionTitle = document.querySelector('.session-title h3');\r\nconst increaseSession = document.querySelector('#increase-session');\r\nconst sessionMinutes = document.querySelector('#session-minutes');\r\nlet sessionSeconds = parseInt(sessionMinutes.textContent) * 60;\r\nconst breakTitle = document.querySelector('.break-title h3');\r\nconst decreaseSession = document.querySelector('#decrease-session');\r\nconst increaseBreak = document.querySelector('#increase-break');\r\nconst breakMinutes = document.querySelector('#break-minutes');\r\nconst decreaseBreak = document.querySelector('#decrease-break');\r\nlet customThemeSwitch = true;\r\nlet autoStart = document.querySelector('#auto-start');\r\nlet breakSelected = false;\r\nlet sessionTimeSelected = true;\r\nlet breakTimeSelected = false;\r\nlet longBreak = 15;\r\n\r\n// TODO: Add documentation on GitHub\r\n// TODO: Add modifiable session/break times through text input when selecting number\r\n// TODO: Add notifications when a session/break finishes\r\n// TODO: Change GitHub icon to info icon. Info icon will include how to use, what it is, and GitHub repo/author\r\nfunction timerDisplay(seconds, breakTime = true, returnRunTimerDisplay) {\r\n    function runTimerDisplay() {\r\n        if (!timerStarted) timerStarted = true;\r\n        if (breakSelected && pomodorosCount !== 4 && !timerStarted) sessionSeconds = breakMinutes.textContent * 60;\r\n        seconds = sessionSeconds;\r\n        clearInterval(countdown);\r\n        autoStart.disabled = true;\r\n        play.disabled = true;\r\n        pause.disabled = false;\r\n        stop.disabled = false;\r\n        arrow.forEach(arrow => {\r\n            arrow.disabled = true;\r\n        });\r\n        const now = Date.now();\r\n        const then = now + seconds * 1000;\r\n        displayTimeLeft(seconds);\r\n\r\n        countdown = setInterval(() => {\r\n            const secondsLeft = Math.round((then - Date.now()) / 1000);\r\n            // const secondsLeft = Math.round((then - then) / 1000);\r\n            sessionSeconds -= 1;\r\n\r\n            if (secondsLeft < 1) {\r\n                clearInterval(countdown);\r\n                if (autoStart.checked) {\r\n                    currentActive = titleBorderChange();\r\n                    if (pomodorosCount === 4) {\r\n                        breakSelected = false;\r\n                        pomodorosCount = 0;\r\n                        pomodoros.forEach((pomodoro) => {\r\n                            if (!customThemeActive) pomodoro.classList.remove(`${currentActive.split('-')[0]}-background`);\r\n                            else pomodoro.setAttribute('style', `background-color: ${customValueBody}; border-color: ${customValueContent};`);\r\n                        });\r\n                        sessionSeconds = parseInt(sessionMinutes.textContent) * 60;\r\n                        timerDisplay(sessionSeconds, true, true);\r\n                        play.disabled = false;\r\n                        play.click();\r\n                    } else if (breakTime) {\r\n                        breakSelected = true;\r\n                        pomodorosCount++;\r\n                        if (!customThemeActive) pomodoros[pomodorosCount - 1].classList.add(`${currentActive.split('-')[0]}-background`);\r\n                        else {\r\n                            pomodoros[pomodorosCount - 1].setAttribute('style', `background-color: ${customValueContent}; border-color: ${customValueContent};`);\r\n                        }\r\n                        pomodorosCount === 4 ?\r\n                            sessionSeconds = Math.min(longBreak * 60, 6000) :\r\n                            sessionSeconds = parseInt(breakMinutes.textContent) * 60;\r\n                        timerDisplay(sessionSeconds, false, true);\r\n                        play.disabled = false;\r\n                        play.click();\r\n                    } else {\r\n                        breakSelected = false;\r\n                        sessionSeconds = parseInt(sessionMinutes.textContent) * 60;\r\n                        timerDisplay(sessionSeconds, true, true);\r\n                        play.disabled = false;\r\n                        play.click();\r\n                    }\r\n                }\r\n            }\r\n            displayTimeLeft(secondsLeft);\r\n        }, 1000);\r\n    }\r\n    if (returnRunTimerDisplay) return runTimerDisplay;\r\n    document.addEventListener('keydown', e => {\r\n        if (e.keyCode === 32) {\r\n            if (e.repeat) return;\r\n            if (pause.disabled) runTimerDisplay();\r\n            else pauseTimer(pause, false)();\r\n        }\r\n    });\r\n    play.addEventListener('click', runTimerDisplay);\r\n}\r\n\r\nfunction sessionBreakSelect(sessionTime, breakTime) {\r\n    // TODO: pop up warning if timer has started\r\n    function runSessionSelect() {\r\n        if (timerStarted) stopTimerHard(stop, sessionSeconds);\r\n        breakSelected = false;\r\n        sessionSeconds = parseInt(sessionMinutes.textContent) * 60;\r\n        displayTimeLeft(sessionSeconds, false);\r\n        timerDisplay(sessionSeconds, true, true);\r\n        if (sessionTimeSelected) null;\r\n        else if (breakTimeSelected) {\r\n            breakTimeSelected = false;\r\n            sessionTimeSelected = true;\r\n            titleBorderChange();\r\n        }\r\n    }\r\n\r\n    function runBreakSelect() {\r\n        if (timerStarted) stopTimerHard(stop, sessionSeconds);\r\n        breakSelected = true;\r\n        sessionSeconds = parseInt(breakMinutes.textContent) * 60;\r\n        displayTimeLeft(sessionSeconds, false);\r\n        timerDisplay(sessionSeconds, false, true);\r\n        if (breakTimeSelected) null;\r\n        else if (sessionTimeSelected) {\r\n            breakTimeSelected = true;\r\n            sessionTimeSelected = false;\r\n            titleBorderChange();\r\n        }\r\n    }\r\n    document.addEventListener('keydown', e => {\r\n        if (e.shiftKey && e.keyCode === 80) {\r\n            if (e.repeat) return\r\n            runSessionSelect();\r\n        }\r\n    });\r\n    sessionTime.addEventListener('click', runSessionSelect);\r\n    document.addEventListener('keydown', e => {\r\n        if (e.shiftKey && e.keyCode === 66) {\r\n            if (e.repeat) return\r\n            runBreakSelect();\r\n        }\r\n    });\r\n    breakTime.addEventListener('click', runBreakSelect);\r\n}\r\n\r\nfunction titleBorderChange() {\r\n    let currentActive;\r\n    if (!customThemeActive) {\r\n        sessionTitle.classList.length >= 1 ?\r\n            currentActive = sessionTitle.classList[sessionTitle.classList.length - 1] :\r\n            currentActive = breakTitle.classList[breakTitle.classList.length - 1];\r\n        breakTitle.classList.toggle(currentActive);\r\n        sessionTitle.classList.toggle(currentActive);\r\n    } else {\r\n        sessionTitle.classList = '';\r\n        breakTitle.classList = '';\r\n        if (customThemeSwitch) {\r\n            customThemeSwitch = false;\r\n            sessionTitle.style.background = '';\r\n            sessionTitle.style.backgroundSize = '';\r\n            sessionTitle.style.backgroundPosition = '';\r\n            breakTitle.style.background = `linear-gradient(to right, ${customValueContent}, ${customValueContent}) no-repeat`;\r\n            breakTitle.style.backgroundSize = 'var(--pomodoro-size)';\r\n            breakTitle.style.backgroundPosition = 'var(--pomodoro-position)';\r\n        } else {\r\n            customThemeSwitch = true;\r\n            breakTitle.style.background = '';\r\n            breakTitle.style.backgroundSize = '';\r\n            breakTitle.style.backgroundPosition = '';\r\n            sessionTitle.style.background = `linear-gradient(to right, ${customValueContent}, ${customValueContent}) no-repeat`;\r\n            sessionTitle.style.backgroundSize = 'var(--pomodoro-size)';\r\n            sessionTitle.style.backgroundPosition = 'var(--pomodoro-position)';\r\n        }\r\n    }\r\n    return currentActive;\r\n}\r\n\r\nfunction timerSession(increase, minutes, decrease, session = true) {\r\n    function runIncrease(isThroughKey = false) {\r\n        if ((parseInt(minutes.textContent) >= 6000) ||\r\n            (!session && !breakSelected && isThroughKey) ||\r\n            (session && breakSelected && isThroughKey)) {\r\n            return;\r\n        } else {\r\n            minutes.textContent = parseInt(minutes.textContent) + 1;\r\n            if (session) {\r\n                if (!breakSelected) displayTimeLeft(parseInt(minutes.textContent) * 60, false);\r\n                sessionSeconds += 60;\r\n            } else if (breakSelected) {\r\n                displayTimeLeft(parseInt(minutes.textContent) * 60, false);\r\n                sessionSeconds += 60;\r\n            }\r\n        }\r\n        longBreak = parseInt(breakMinutes.textContent) * 3;\r\n    }\r\n    increase.addEventListener('click', () => {\r\n        runIncrease(false);\r\n    });\r\n    document.addEventListener('keydown', e => {\r\n        if (e.shiftKey && e.keyCode === 38 && !timerStarted) {\r\n            runIncrease(true);\r\n        }\r\n    });\r\n\r\n    function runDecrease(isThroughKey = false) {\r\n        if ((parseInt(minutes.textContent) <= 1) ||\r\n            (!session && !breakSelected && isThroughKey) ||\r\n            (session && breakSelected && isThroughKey)) {\r\n            return;\r\n        } else {\r\n            minutes.textContent = parseInt(minutes.textContent) - 1;\r\n            if (session) {\r\n                if (!breakSelected) displayTimeLeft(parseInt(minutes.textContent) * 60, false);\r\n                sessionSeconds -= 60;\r\n            } else if (breakSelected) {\r\n                displayTimeLeft(parseInt(minutes.textContent) * 60, false);\r\n                sessionSeconds -= 60;\r\n            }\r\n        }\r\n        longBreak = parseInt(breakMinutes.textContent) * 3;\r\n    }\r\n    decrease.addEventListener('click', () => {\r\n        runDecrease(false);\r\n    });\r\n    document.addEventListener('keydown', e => {\r\n        if (e.shiftKey && e.keyCode === 40 && !timerStarted) {\r\n            runDecrease(true);\r\n        }\r\n    });\r\n}\r\n\r\nfunction displayTimeLeft(seconds, title = true) {\r\n    let minutes = Math.floor(seconds / 60);\r\n    const remainderSeconds = seconds % 60;\r\n    let display;\r\n    if (minutes >= 60) {\r\n        const hours = Math.floor(minutes / 60);\r\n        minutes %= 60;\r\n        display = `${hours < 10 ? hours.toString().padStart(2, 0) : hours}:${\r\n            minutes < 10 ? minutes.toString().padStart(2, 0) : minutes}:${\r\n            remainderSeconds < 10 ? remainderSeconds.toString().padStart(2, 0) : remainderSeconds}`;\r\n    } else {\r\n        display = `${minutes < 10 ? minutes.toString().padStart(2, 0) : minutes}:${\r\n            remainderSeconds < 10 ? remainderSeconds.toString().padStart(2, 0) : remainderSeconds}`;\r\n    }\r\n    timer.textContent = display;\r\n    if (!title) return;\r\n    else document.title = `(${display}) Pomodoro`;\r\n}\r\n\r\nfunction pauseTimer(pause, clickRun) {\r\n    function runPauseTimer() {\r\n        clearInterval(countdown);\r\n        sessionTitle.classList >= 1 ? timerDisplay(0, true, true) : timerDisplay(0, false, true);\r\n        pause.disabled = true;\r\n        play.disabled = false;\r\n    }\r\n\r\n    if (!clickRun) return runPauseTimer;\r\n    else {\r\n        pause.disabled = true;\r\n        pause.addEventListener('click', runPauseTimer);\r\n    }\r\n}\r\n\r\nfunction breakSessionTitleReset() {\r\n    if (breakTitle.classList.length >= 1) {\r\n        sessionTitle.classList.add(breakTitle.classList[breakTitle.classList.length - 1]);\r\n        breakTitle.classList = '';\r\n    } else if (customThemeActive) {\r\n        sessionTitle.style.background = `linear-gradient(to right, ${customValueContent}, ${customValueContent}) no-repeat`;\r\n        sessionTitle.style.backgroundSize = 'var(--pomodoro-size)';\r\n        sessionTitle.style.backgroundPosition = 'var(--pomodoro-position)';\r\n        breakTitle.style.background = '';\r\n        customThemeSwitch = true;\r\n    }\r\n}\r\n\r\nfunction stopTimer(stop, seconds) {\r\n    stop.disabled = true;\r\n\r\n    function runStopTimer() {\r\n        if (breakSelected && pomodorosCount !== 4) seconds = parseInt(breakMinutes.textContent) * 60;\r\n        else if (pomodorosCount === 4) seconds = longBreak;\r\n        else seconds = parseInt(sessionMinutes.textContent) * 60;\r\n        timerStarted = false;\r\n        sessionSeconds = seconds;\r\n        clearInterval(countdown);\r\n        displayTimeLeft(seconds);\r\n        stop.disabled = true;\r\n        pause.disabled = true;\r\n        play.disabled = false;\r\n        autoStart.disabled = false;\r\n        arrow.forEach(arrow => {\r\n            arrow.disabled = false;\r\n        });\r\n        document.title = 'Pomodoro';\r\n        if (breakSelected) timerDisplay(seconds, false, true);\r\n        else timerDisplay(seconds, true, true);\r\n    }\r\n    document.addEventListener('keydown', e => {\r\n        if (e.shiftKey && e.keyCode === 83) {\r\n            if (e.repeat) return\r\n            runStopTimer();\r\n        }\r\n    });\r\n    stop.addEventListener('click', runStopTimer);\r\n}\r\n\r\nfunction stopTimerHard(stop, seconds) {\r\n    seconds = parseInt(sessionMinutes.textContent) * 60;\r\n    timerStarted = false;\r\n    seconds = parseInt(sessionMinutes.textContent) * 60;\r\n    sessionSeconds = seconds;\r\n    clearInterval(countdown);\r\n    displayTimeLeft(seconds);\r\n    breakSessionTitleReset();\r\n    resetPomodoros(pomodoros);\r\n    pomodorosCount = 0;\r\n    breakSelected = false;\r\n    sessionTimeSelected = true;\r\n    breakTimeSelected = false;\r\n    stop.disabled = true;\r\n    pause.disabled = true;\r\n    play.disabled = false;\r\n    autoStart.disabled = false;\r\n    arrow.forEach(arrow => {\r\n        arrow.disabled = false;\r\n    });\r\n    document.title = 'Pomodoro';\r\n    timerDisplay(seconds, true, true);\r\n}\r\n\r\nfunction resetPomodoros(pomodoros) {\r\n    pomodoros.forEach((pomodoro) => {\r\n        if (!customThemeActive) {\r\n            const pomodoroBorder = pomodoro.classList[1];\r\n            pomodoro.classList = '';\r\n            pomodoro.classList.add('pomodoro', pomodoroBorder);\r\n        } else {\r\n            pomodoro.classList = '';\r\n            pomodoro.classList.add('pomodoro');\r\n            pomodoro.style.backgroundColor = '';\r\n        }\r\n    });\r\n}\r\n\r\nfunction resetTimer(reset) {\r\n    function runResetTimer() {\r\n        timerStarted = false;\r\n        clearInterval(countdown);\r\n        timer.textContent = '25:00';\r\n        sessionMinutes.textContent = '25';\r\n        breakSessionTitleReset();\r\n        breakSelected = false;\r\n        sessionTimeSelected = true;\r\n        breakTimeSelected = false;\r\n        resetPomodoros(pomodoros);\r\n        pomodorosCount = 0;\r\n        sessionSeconds = parseInt(sessionMinutes.textContent) * 60;\r\n        breakMinutes.textContent = '5';\r\n        longBreak = 15;\r\n        arrow.forEach(arrow => {\r\n            arrow.disabled = false;\r\n        });\r\n        play.disabled = false;\r\n        autoStart.disabled = false;\r\n        document.title = 'Pomodoro';\r\n        timerDisplay(parseInt(timer.textContent.split(':')[0]) * 60, true, true);\r\n    }\r\n    document.addEventListener('keydown', e => {\r\n        if (e.shiftKey && e.keyCode === 82) {\r\n            if (e.repeat) return;\r\n            runResetTimer();\r\n        }\r\n    });\r\n    reset.addEventListener('click', runResetTimer);\r\n}\r\n\r\nfunction mainTimer() {\r\n    timerDisplay(sessionSeconds, true, false);\r\n    timerSession(increaseSession, sessionMinutes, decreaseSession, true);\r\n    timerSession(increaseBreak, breakMinutes, decreaseBreak, false);\r\n    sessionBreakSelect(sessionTitle, breakTitle);\r\n    pauseTimer(pause, true);\r\n    stopTimer(stop, sessionSeconds);\r\n    resetTimer(reset);\r\n}\r\n\r\nwindow.onload = mainTimer();\n// TODO: For modal, modularize HTML classes and id's, and JS functions and variables\r\nconst modalSettings = document.querySelector('#simple-modal-settings');\r\nconst modalAbout = document.querySelector('#simple-modal-about');\r\nconst modalBtnSettings = document.querySelector('#modal-btn-settings');\r\nconst modalBtnAbout = document.querySelector('#modal-btn-about');\r\nconst closeBtnSettings = document.querySelector('#close-btn-settings');\r\nconst closeBtnAbout = document.querySelector('#close-btn-about');\r\nconst settings = document.querySelector('.settings');\r\nconst about = document.querySelector('.about');\r\n\r\nfunction modalDisplaySettings(modal, modalBtn, closeBtn, settings) {\r\n    modalBtn.addEventListener('click', () => {\r\n        modal.style.visibility = 'visible';\r\n        modal.style.opacity = '1';\r\n        settings.style.transform = 'rotate(90deg)';\r\n        body.style.overflow = 'hidden';\r\n        settings.blur();\r\n    });\r\n    closeBtn.addEventListener('click', () => {\r\n        hideModalSettings(modal, settings);\r\n    });\r\n    window.addEventListener('click', function (e) {\r\n        if (e.target === modal) {\r\n            hideModalSettings(modal, settings);\r\n        }\r\n    });\r\n}\r\n\r\nfunction hideModalSettings(modal, settings) {\r\n    modal.style.opacity = '0';\r\n    setTimeout(() => {\r\n        modal.style.visibility = 'hidden';\r\n    }, 300);\r\n    settings.style.transform = 'rotate(0deg)';\r\n    body.style.overflow = 'auto';\r\n}\r\n\r\nfunction modalDisplayAbout(modal, modalBtn, closeBtn, about) {\r\n    modalBtn.addEventListener('click', () => {\r\n        modal.style.visibility = 'visible';\r\n        modal.style.opacity = '1';\r\n        body.style.overflow = 'hidden';\r\n        about.blur();\r\n    });\r\n    closeBtn.addEventListener('click', () => {\r\n        hideModalAbout(modal);\r\n    });\r\n    window.addEventListener('click', function (e) {\r\n        if (e.target === modal) {\r\n            hideModalAbout(modal);\r\n        }\r\n    });\r\n}\r\n\r\nfunction hideModalAbout(modal) {\r\n    modal.style.opacity = '0';\r\n    setTimeout(() => {\r\n        modal.style.visibility = 'hidden';\r\n    }, 300);\r\n    body.style.overflow = 'auto';\r\n}\r\n\r\nfunction mainModal() {\r\n    modalDisplaySettings(modalSettings, modalBtnSettings, closeBtnSettings, settings);\r\n    modalDisplayAbout(modalAbout, modalBtnAbout, closeBtnAbout, about);\r\n}\r\n\r\nwindow.onload = mainModal();\n// Spectrum Colorpicker v1.8.0\r\n// https://github.com/bgrins/spectrum\r\n// Author: Brian Grinstead\r\n// License: MIT\r\n\r\n(function (factory) {\r\n    \"use strict\";\r\n\r\n    if (typeof define === 'function' && define.amd) { // AMD\r\n        define(['jquery'], factory);\r\n    }\r\n    else if (typeof exports == \"object\" && typeof module == \"object\") { // CommonJS\r\n        module.exports = factory(require('jquery'));\r\n    }\r\n    else { // Browser\r\n        factory(jQuery);\r\n    }\r\n})(function($, undefined) {\r\n    \"use strict\";\r\n\r\n    var defaultOpts = {\r\n\r\n        // Callbacks\r\n        beforeShow: noop,\r\n        move: noop,\r\n        change: noop,\r\n        show: noop,\r\n        hide: noop,\r\n\r\n        // Options\r\n        color: false,\r\n        flat: false,\r\n        showInput: false,\r\n        allowEmpty: false,\r\n        showButtons: true,\r\n        clickoutFiresChange: true,\r\n        showInitial: false,\r\n        showPalette: false,\r\n        showPaletteOnly: false,\r\n        hideAfterPaletteSelect: false,\r\n        togglePaletteOnly: false,\r\n        showSelectionPalette: true,\r\n        localStorageKey: false,\r\n        appendTo: \"body\",\r\n        maxSelectionSize: 7,\r\n        cancelText: \"cancel\",\r\n        chooseText: \"choose\",\r\n        togglePaletteMoreText: \"more\",\r\n        togglePaletteLessText: \"less\",\r\n        clearText: \"Clear Color Selection\",\r\n        noColorSelectedText: \"No Color Selected\",\r\n        preferredFormat: false,\r\n        className: \"\", // Deprecated - use containerClassName and replacerClassName instead.\r\n        containerClassName: \"\",\r\n        replacerClassName: \"\",\r\n        showAlpha: false,\r\n        theme: \"sp-light\",\r\n        palette: [[\"#ffffff\", \"#000000\", \"#ff0000\", \"#ff8000\", \"#ffff00\", \"#008000\", \"#0000ff\", \"#4b0082\", \"#9400d3\"]],\r\n        selectionPalette: [],\r\n        disabled: false,\r\n        offset: null\r\n    },\r\n    spectrums = [],\r\n    IE = !!/msie/i.exec( window.navigator.userAgent ),\r\n    rgbaSupport = (function() {\r\n        function contains( str, substr ) {\r\n            return !!~('' + str).indexOf(substr);\r\n        }\r\n\r\n        var elem = document.createElement('div');\r\n        var style = elem.style;\r\n        style.cssText = 'background-color:rgba(0,0,0,.5)';\r\n        return contains(style.backgroundColor, 'rgba') || contains(style.backgroundColor, 'hsla');\r\n    })(),\r\n    replaceInput = [\r\n        \"<div class='sp-replacer'>\",\r\n            \"<div class='sp-preview'><div class='sp-preview-inner'></div></div>\",\r\n            \"<div class='sp-dd'>&#9660;</div>\",\r\n        \"</div>\"\r\n    ].join(''),\r\n    markup = (function () {\r\n\r\n        // IE does not support gradients with multiple stops, so we need to simulate\r\n        //  that for the rainbow slider with 8 divs that each have a single gradient\r\n        var gradientFix = \"\";\r\n        if (IE) {\r\n            for (var i = 1; i <= 6; i++) {\r\n                gradientFix += \"<div class='sp-\" + i + \"'></div>\";\r\n            }\r\n        }\r\n\r\n        return [\r\n            \"<div class='sp-container sp-hidden'>\",\r\n                \"<div class='sp-palette-container'>\",\r\n                    \"<div class='sp-palette sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-palette-button-container sp-cf'>\",\r\n                        \"<button type='button' class='sp-palette-toggle'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n                \"<div class='sp-picker-container'>\",\r\n                    \"<div class='sp-top sp-cf'>\",\r\n                        \"<div class='sp-fill'></div>\",\r\n                        \"<div class='sp-top-inner'>\",\r\n                            \"<div class='sp-color'>\",\r\n                                \"<div class='sp-sat'>\",\r\n                                    \"<div class='sp-val'>\",\r\n                                        \"<div class='sp-dragger'></div>\",\r\n                                    \"</div>\",\r\n                                \"</div>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-clear sp-clear-display'>\",\r\n                            \"</div>\",\r\n                            \"<div class='sp-hue'>\",\r\n                                \"<div class='sp-slider'></div>\",\r\n                                gradientFix,\r\n                            \"</div>\",\r\n                        \"</div>\",\r\n                        \"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-input-container sp-cf'>\",\r\n                        \"<input class='sp-input' type='text' spellcheck='false'  />\",\r\n                    \"</div>\",\r\n                    \"<div class='sp-initial sp-thumb sp-cf'></div>\",\r\n                    \"<div class='sp-button-container sp-cf'>\",\r\n                        \"<a class='sp-cancel' href='#'></a>\",\r\n                        \"<button type='button' class='sp-choose'></button>\",\r\n                    \"</div>\",\r\n                \"</div>\",\r\n            \"</div>\"\r\n        ].join(\"\");\r\n    })();\r\n\r\n    function paletteTemplate (p, color, className, opts) {\r\n        var html = [];\r\n        for (var i = 0; i < p.length; i++) {\r\n            var current = p[i];\r\n            if(current) {\r\n                var tiny = tinycolor(current);\r\n                var c = tiny.toHsl().l < 0.5 ? \"sp-thumb-el sp-thumb-dark\" : \"sp-thumb-el sp-thumb-light\";\r\n                c += (tinycolor.equals(color, current)) ? \" sp-thumb-active\" : \"\";\r\n                var formattedString = tiny.toString(opts.preferredFormat || \"rgb\");\r\n                var swatchStyle = rgbaSupport ? (\"background-color:\" + tiny.toRgbString()) : \"filter:\" + tiny.toFilter();\r\n                html.push('<span title=\"' + formattedString + '\" data-color=\"' + tiny.toRgbString() + '\" class=\"' + c + '\"><span class=\"sp-thumb-inner\" style=\"' + swatchStyle + ';\" /></span>');\r\n            } else {\r\n                var cls = 'sp-clear-display';\r\n                html.push($('<div />')\r\n                    .append($('<span data-color=\"\" style=\"background-color:transparent;\" class=\"' + cls + '\"></span>')\r\n                        .attr('title', opts.noColorSelectedText)\r\n                    )\r\n                    .html()\r\n                );\r\n            }\r\n        }\r\n        return \"<div class='sp-cf \" + className + \"'>\" + html.join('') + \"</div>\";\r\n    }\r\n\r\n    function hideAll() {\r\n        for (var i = 0; i < spectrums.length; i++) {\r\n            if (spectrums[i]) {\r\n                spectrums[i].hide();\r\n            }\r\n        }\r\n    }\r\n\r\n    function instanceOptions(o, callbackContext) {\r\n        var opts = $.extend({}, defaultOpts, o);\r\n        opts.callbacks = {\r\n            'move': bind(opts.move, callbackContext),\r\n            'change': bind(opts.change, callbackContext),\r\n            'show': bind(opts.show, callbackContext),\r\n            'hide': bind(opts.hide, callbackContext),\r\n            'beforeShow': bind(opts.beforeShow, callbackContext)\r\n        };\r\n\r\n        return opts;\r\n    }\r\n\r\n    function spectrum(element, o) {\r\n\r\n        var opts = instanceOptions(o, element),\r\n            flat = opts.flat,\r\n            showSelectionPalette = opts.showSelectionPalette,\r\n            localStorageKey = opts.localStorageKey,\r\n            theme = opts.theme,\r\n            callbacks = opts.callbacks,\r\n            resize = throttle(reflow, 10),\r\n            visible = false,\r\n            isDragging = false,\r\n            dragWidth = 0,\r\n            dragHeight = 0,\r\n            dragHelperHeight = 0,\r\n            slideHeight = 0,\r\n            slideWidth = 0,\r\n            alphaWidth = 0,\r\n            alphaSlideHelperWidth = 0,\r\n            slideHelperHeight = 0,\r\n            currentHue = 0,\r\n            currentSaturation = 0,\r\n            currentValue = 0,\r\n            currentAlpha = 1,\r\n            palette = [],\r\n            paletteArray = [],\r\n            paletteLookup = {},\r\n            selectionPalette = opts.selectionPalette.slice(0),\r\n            maxSelectionSize = opts.maxSelectionSize,\r\n            draggingClass = \"sp-dragging\",\r\n            shiftMovementDirection = null;\r\n\r\n        var doc = element.ownerDocument,\r\n            body = doc.body,\r\n            boundElement = $(element),\r\n            disabled = false,\r\n            container = $(markup, doc).addClass(theme),\r\n            pickerContainer = container.find(\".sp-picker-container\"),\r\n            dragger = container.find(\".sp-color\"),\r\n            dragHelper = container.find(\".sp-dragger\"),\r\n            slider = container.find(\".sp-hue\"),\r\n            slideHelper = container.find(\".sp-slider\"),\r\n            alphaSliderInner = container.find(\".sp-alpha-inner\"),\r\n            alphaSlider = container.find(\".sp-alpha\"),\r\n            alphaSlideHelper = container.find(\".sp-alpha-handle\"),\r\n            textInput = container.find(\".sp-input\"),\r\n            paletteContainer = container.find(\".sp-palette\"),\r\n            initialColorContainer = container.find(\".sp-initial\"),\r\n            cancelButton = container.find(\".sp-cancel\"),\r\n            clearButton = container.find(\".sp-clear\"),\r\n            chooseButton = container.find(\".sp-choose\"),\r\n            toggleButton = container.find(\".sp-palette-toggle\"),\r\n            isInput = boundElement.is(\"input\"),\r\n            isInputTypeColor = isInput && boundElement.attr(\"type\") === \"color\" && inputTypeColorSupport(),\r\n            shouldReplace = isInput && !flat,\r\n            replacer = (shouldReplace) ? $(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName) : $([]),\r\n            offsetElement = (shouldReplace) ? replacer : boundElement,\r\n            previewElement = replacer.find(\".sp-preview-inner\"),\r\n            initialColor = opts.color || (isInput && boundElement.val()),\r\n            colorOnShow = false,\r\n            currentPreferredFormat = opts.preferredFormat,\r\n            clickoutFiresChange = !opts.showButtons || opts.clickoutFiresChange,\r\n            isEmpty = !initialColor,\r\n            allowEmpty = opts.allowEmpty && !isInputTypeColor;\r\n\r\n        function applyOptions() {\r\n\r\n            if (opts.showPaletteOnly) {\r\n                opts.showPalette = true;\r\n            }\r\n\r\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\r\n\r\n            if (opts.palette) {\r\n                palette = opts.palette.slice(0);\r\n                paletteArray = $.isArray(palette[0]) ? palette : [palette];\r\n                paletteLookup = {};\r\n                for (var i = 0; i < paletteArray.length; i++) {\r\n                    for (var j = 0; j < paletteArray[i].length; j++) {\r\n                        var rgb = tinycolor(paletteArray[i][j]).toRgbString();\r\n                        paletteLookup[rgb] = true;\r\n                    }\r\n                }\r\n            }\r\n\r\n            container.toggleClass(\"sp-flat\", flat);\r\n            container.toggleClass(\"sp-input-disabled\", !opts.showInput);\r\n            container.toggleClass(\"sp-alpha-enabled\", opts.showAlpha);\r\n            container.toggleClass(\"sp-clear-enabled\", allowEmpty);\r\n            container.toggleClass(\"sp-buttons-disabled\", !opts.showButtons);\r\n            container.toggleClass(\"sp-palette-buttons-disabled\", !opts.togglePaletteOnly);\r\n            container.toggleClass(\"sp-palette-disabled\", !opts.showPalette);\r\n            container.toggleClass(\"sp-palette-only\", opts.showPaletteOnly);\r\n            container.toggleClass(\"sp-initial-disabled\", !opts.showInitial);\r\n            container.addClass(opts.className).addClass(opts.containerClassName);\r\n\r\n            reflow();\r\n        }\r\n\r\n        function initialize() {\r\n\r\n            if (IE) {\r\n                container.find(\"*:not(input)\").attr(\"unselectable\", \"on\");\r\n            }\r\n\r\n            applyOptions();\r\n\r\n            if (shouldReplace) {\r\n                boundElement.after(replacer).hide();\r\n            }\r\n\r\n            if (!allowEmpty) {\r\n                clearButton.hide();\r\n            }\r\n\r\n            if (flat) {\r\n                boundElement.after(container).hide();\r\n            }\r\n            else {\r\n\r\n                var appendTo = opts.appendTo === \"parent\" ? boundElement.parent() : $(opts.appendTo);\r\n                if (appendTo.length !== 1) {\r\n                    appendTo = $(\"body\");\r\n                }\r\n\r\n                appendTo.append(container);\r\n            }\r\n\r\n            updateSelectionPaletteFromStorage();\r\n\r\n            offsetElement.bind(\"click.spectrum touchstart.spectrum\", function (e) {\r\n                if (!disabled) {\r\n                    toggle();\r\n                }\r\n\r\n                e.stopPropagation();\r\n\r\n                if (!$(e.target).is(\"input\")) {\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n\r\n            if(boundElement.is(\":disabled\") || (opts.disabled === true)) {\r\n                disable();\r\n            }\r\n\r\n            // Prevent clicks from bubbling up to document.  This would cause it to be hidden.\r\n            container.click(stopPropagation);\r\n\r\n            // Handle user typed input\r\n            textInput.change(setFromTextInput);\r\n            textInput.bind(\"paste\", function () {\r\n                setTimeout(setFromTextInput, 1);\r\n            });\r\n            textInput.keydown(function (e) { if (e.keyCode == 13) { setFromTextInput(); } });\r\n\r\n            cancelButton.text(opts.cancelText);\r\n            cancelButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                revert();\r\n                hide();\r\n            });\r\n\r\n            clearButton.attr(\"title\", opts.clearText);\r\n            clearButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                isEmpty = true;\r\n                move();\r\n\r\n                if(flat) {\r\n                    //for the flat style, this is a change event\r\n                    updateOriginalInput(true);\r\n                }\r\n            });\r\n\r\n            chooseButton.text(opts.chooseText);\r\n            chooseButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                if (IE && textInput.is(\":focus\")) {\r\n                    textInput.trigger('change');\r\n                }\r\n\r\n                if (isValid()) {\r\n                    updateOriginalInput(true);\r\n                    hide();\r\n                }\r\n            });\r\n\r\n            toggleButton.text(opts.showPaletteOnly ? opts.togglePaletteMoreText : opts.togglePaletteLessText);\r\n            toggleButton.bind(\"click.spectrum\", function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n\r\n                opts.showPaletteOnly = !opts.showPaletteOnly;\r\n\r\n                // To make sure the Picker area is drawn on the right, next to the\r\n                // Palette area (and not below the palette), first move the Palette\r\n                // to the left to make space for the picker, plus 5px extra.\r\n                // The 'applyOptions' function puts the whole container back into place\r\n                // and takes care of the button-text and the sp-palette-only CSS class.\r\n                if (!opts.showPaletteOnly && !flat) {\r\n                    container.css('left', '-=' + (pickerContainer.outerWidth(true) + 5));\r\n                }\r\n                applyOptions();\r\n            });\r\n\r\n            draggable(alphaSlider, function (dragX, dragY, e) {\r\n                currentAlpha = (dragX / alphaWidth);\r\n                isEmpty = false;\r\n                if (e.shiftKey) {\r\n                    currentAlpha = Math.round(currentAlpha * 10) / 10;\r\n                }\r\n\r\n                move();\r\n            }, dragStart, dragStop);\r\n\r\n            draggable(slider, function (dragX, dragY) {\r\n                currentHue = parseFloat(dragY / slideHeight);\r\n                isEmpty = false;\r\n                if (!opts.showAlpha) {\r\n                    currentAlpha = 1;\r\n                }\r\n                move();\r\n            }, dragStart, dragStop);\r\n\r\n            draggable(dragger, function (dragX, dragY, e) {\r\n\r\n                // shift+drag should snap the movement to either the x or y axis.\r\n                if (!e.shiftKey) {\r\n                    shiftMovementDirection = null;\r\n                }\r\n                else if (!shiftMovementDirection) {\r\n                    var oldDragX = currentSaturation * dragWidth;\r\n                    var oldDragY = dragHeight - (currentValue * dragHeight);\r\n                    var furtherFromX = Math.abs(dragX - oldDragX) > Math.abs(dragY - oldDragY);\r\n\r\n                    shiftMovementDirection = furtherFromX ? \"x\" : \"y\";\r\n                }\r\n\r\n                var setSaturation = !shiftMovementDirection || shiftMovementDirection === \"x\";\r\n                var setValue = !shiftMovementDirection || shiftMovementDirection === \"y\";\r\n\r\n                if (setSaturation) {\r\n                    currentSaturation = parseFloat(dragX / dragWidth);\r\n                }\r\n                if (setValue) {\r\n                    currentValue = parseFloat((dragHeight - dragY) / dragHeight);\r\n                }\r\n\r\n                isEmpty = false;\r\n                if (!opts.showAlpha) {\r\n                    currentAlpha = 1;\r\n                }\r\n\r\n                move();\r\n\r\n            }, dragStart, dragStop);\r\n\r\n            if (!!initialColor) {\r\n                set(initialColor);\r\n\r\n                // In case color was black - update the preview UI and set the format\r\n                // since the set function will not run (default color is black).\r\n                updateUI();\r\n                currentPreferredFormat = opts.preferredFormat || tinycolor(initialColor).format;\r\n\r\n                addColorToSelectionPalette(initialColor);\r\n            }\r\n            else {\r\n                updateUI();\r\n            }\r\n\r\n            if (flat) {\r\n                show();\r\n            }\r\n\r\n            function paletteElementClick(e) {\r\n                if (e.data && e.data.ignore) {\r\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\r\n                    move();\r\n                }\r\n                else {\r\n                    set($(e.target).closest(\".sp-thumb-el\").data(\"color\"));\r\n                    move();\r\n                    updateOriginalInput(true);\r\n                    if (opts.hideAfterPaletteSelect) {\r\n                      hide();\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            var paletteEvent = IE ? \"mousedown.spectrum\" : \"click.spectrum touchstart.spectrum\";\r\n            paletteContainer.delegate(\".sp-thumb-el\", paletteEvent, paletteElementClick);\r\n            initialColorContainer.delegate(\".sp-thumb-el:nth-child(1)\", paletteEvent, { ignore: true }, paletteElementClick);\r\n        }\r\n\r\n        function updateSelectionPaletteFromStorage() {\r\n\r\n            if (localStorageKey && window.localStorage) {\r\n\r\n                // Migrate old palettes over to new format.  May want to remove this eventually.\r\n                try {\r\n                    var oldPalette = window.localStorage[localStorageKey].split(\",#\");\r\n                    if (oldPalette.length > 1) {\r\n                        delete window.localStorage[localStorageKey];\r\n                        $.each(oldPalette, function(i, c) {\r\n                             addColorToSelectionPalette(c);\r\n                        });\r\n                    }\r\n                }\r\n                catch(e) { }\r\n\r\n                try {\r\n                    selectionPalette = window.localStorage[localStorageKey].split(\";\");\r\n                }\r\n                catch (e) { }\r\n            }\r\n        }\r\n\r\n        function addColorToSelectionPalette(color) {\r\n            if (showSelectionPalette) {\r\n                var rgb = tinycolor(color).toRgbString();\r\n                if (!paletteLookup[rgb] && $.inArray(rgb, selectionPalette) === -1) {\r\n                    selectionPalette.push(rgb);\r\n                    while(selectionPalette.length > maxSelectionSize) {\r\n                        selectionPalette.shift();\r\n                    }\r\n                }\r\n\r\n                if (localStorageKey && window.localStorage) {\r\n                    try {\r\n                        window.localStorage[localStorageKey] = selectionPalette.join(\";\");\r\n                    }\r\n                    catch(e) { }\r\n                }\r\n            }\r\n        }\r\n\r\n        function getUniqueSelectionPalette() {\r\n            var unique = [];\r\n            if (opts.showPalette) {\r\n                for (var i = 0; i < selectionPalette.length; i++) {\r\n                    var rgb = tinycolor(selectionPalette[i]).toRgbString();\r\n\r\n                    if (!paletteLookup[rgb]) {\r\n                        unique.push(selectionPalette[i]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return unique.reverse().slice(0, opts.maxSelectionSize);\r\n        }\r\n\r\n        function drawPalette() {\r\n\r\n            var currentColor = get();\r\n\r\n            var html = $.map(paletteArray, function (palette, i) {\r\n                return paletteTemplate(palette, currentColor, \"sp-palette-row sp-palette-row-\" + i, opts);\r\n            });\r\n\r\n            updateSelectionPaletteFromStorage();\r\n\r\n            if (selectionPalette) {\r\n                html.push(paletteTemplate(getUniqueSelectionPalette(), currentColor, \"sp-palette-row sp-palette-row-selection\", opts));\r\n            }\r\n\r\n            paletteContainer.html(html.join(\"\"));\r\n        }\r\n\r\n        function drawInitial() {\r\n            if (opts.showInitial) {\r\n                var initial = colorOnShow;\r\n                var current = get();\r\n                initialColorContainer.html(paletteTemplate([initial, current], current, \"sp-palette-row-initial\", opts));\r\n            }\r\n        }\r\n\r\n        function dragStart() {\r\n            if (dragHeight <= 0 || dragWidth <= 0 || slideHeight <= 0) {\r\n                reflow();\r\n            }\r\n            isDragging = true;\r\n            container.addClass(draggingClass);\r\n            shiftMovementDirection = null;\r\n            boundElement.trigger('dragstart.spectrum', [ get() ]);\r\n        }\r\n\r\n        function dragStop() {\r\n            isDragging = false;\r\n            container.removeClass(draggingClass);\r\n            boundElement.trigger('dragstop.spectrum', [ get() ]);\r\n        }\r\n\r\n        function setFromTextInput() {\r\n\r\n            var value = textInput.val();\r\n\r\n            if ((value === null || value === \"\") && allowEmpty) {\r\n                set(null);\r\n                updateOriginalInput(true);\r\n            }\r\n            else {\r\n                var tiny = tinycolor(value);\r\n                if (tiny.isValid()) {\r\n                    set(tiny);\r\n                    updateOriginalInput(true);\r\n                }\r\n                else {\r\n                    textInput.addClass(\"sp-validation-error\");\r\n                }\r\n            }\r\n        }\r\n\r\n        function toggle() {\r\n            if (visible) {\r\n                hide();\r\n            }\r\n            else {\r\n                show();\r\n            }\r\n        }\r\n\r\n        function show() {\r\n            var event = $.Event('beforeShow.spectrum');\r\n\r\n            if (visible) {\r\n                reflow();\r\n                return;\r\n            }\r\n\r\n            boundElement.trigger(event, [ get() ]);\r\n\r\n            if (callbacks.beforeShow(get()) === false || event.isDefaultPrevented()) {\r\n                return;\r\n            }\r\n\r\n            hideAll();\r\n            visible = true;\r\n\r\n            $(doc).bind(\"keydown.spectrum\", onkeydown);\r\n            $(doc).bind(\"click.spectrum\", clickout);\r\n            $(window).bind(\"resize.spectrum\", resize);\r\n            replacer.addClass(\"sp-active\");\r\n            container.removeClass(\"sp-hidden\");\r\n\r\n            reflow();\r\n            updateUI();\r\n\r\n            colorOnShow = get();\r\n\r\n            drawInitial();\r\n            callbacks.show(colorOnShow);\r\n            boundElement.trigger('show.spectrum', [ colorOnShow ]);\r\n        }\r\n\r\n        function onkeydown(e) {\r\n            // Close on ESC\r\n            if (e.keyCode === 27) {\r\n                hide();\r\n            }\r\n        }\r\n\r\n        function clickout(e) {\r\n            // Return on right click.\r\n            if (e.button == 2) { return; }\r\n\r\n            // If a drag event was happening during the mouseup, don't hide\r\n            // on click.\r\n            if (isDragging) { return; }\r\n\r\n            if (clickoutFiresChange) {\r\n                updateOriginalInput(true);\r\n            }\r\n            else {\r\n                revert();\r\n            }\r\n            hide();\r\n        }\r\n\r\n        function hide() {\r\n            // Return if hiding is unnecessary\r\n            if (!visible || flat) { return; }\r\n            visible = false;\r\n\r\n            $(doc).unbind(\"keydown.spectrum\", onkeydown);\r\n            $(doc).unbind(\"click.spectrum\", clickout);\r\n            $(window).unbind(\"resize.spectrum\", resize);\r\n\r\n            replacer.removeClass(\"sp-active\");\r\n            container.addClass(\"sp-hidden\");\r\n\r\n            callbacks.hide(get());\r\n            boundElement.trigger('hide.spectrum', [ get() ]);\r\n        }\r\n\r\n        function revert() {\r\n            set(colorOnShow, true);\r\n        }\r\n\r\n        function set(color, ignoreFormatChange) {\r\n            if (tinycolor.equals(color, get())) {\r\n                // Update UI just in case a validation error needs\r\n                // to be cleared.\r\n                updateUI();\r\n                return;\r\n            }\r\n\r\n            var newColor, newHsv;\r\n            if (!color && allowEmpty) {\r\n                isEmpty = true;\r\n            } else {\r\n                isEmpty = false;\r\n                newColor = tinycolor(color);\r\n                newHsv = newColor.toHsv();\r\n\r\n                currentHue = (newHsv.h % 360) / 360;\r\n                currentSaturation = newHsv.s;\r\n                currentValue = newHsv.v;\r\n                currentAlpha = newHsv.a;\r\n            }\r\n            updateUI();\r\n\r\n            if (newColor && newColor.isValid() && !ignoreFormatChange) {\r\n                currentPreferredFormat = opts.preferredFormat || newColor.getFormat();\r\n            }\r\n        }\r\n\r\n        function get(opts) {\r\n            opts = opts || { };\r\n\r\n            if (allowEmpty && isEmpty) {\r\n                return null;\r\n            }\r\n\r\n            return tinycolor.fromRatio({\r\n                h: currentHue,\r\n                s: currentSaturation,\r\n                v: currentValue,\r\n                a: Math.round(currentAlpha * 100) / 100\r\n            }, { format: opts.format || currentPreferredFormat });\r\n        }\r\n\r\n        function isValid() {\r\n            return !textInput.hasClass(\"sp-validation-error\");\r\n        }\r\n\r\n        function move() {\r\n            updateUI();\r\n\r\n            callbacks.move(get());\r\n            boundElement.trigger('move.spectrum', [ get() ]);\r\n        }\r\n\r\n        function updateUI() {\r\n\r\n            textInput.removeClass(\"sp-validation-error\");\r\n\r\n            updateHelperLocations();\r\n\r\n            // Update dragger background color (gradients take care of saturation and value).\r\n            var flatColor = tinycolor.fromRatio({ h: currentHue, s: 1, v: 1 });\r\n            dragger.css(\"background-color\", flatColor.toHexString());\r\n\r\n            // Get a format that alpha will be included in (hex and names ignore alpha)\r\n            var format = currentPreferredFormat;\r\n            if (currentAlpha < 1 && !(currentAlpha === 0 && format === \"name\")) {\r\n                if (format === \"hex\" || format === \"hex3\" || format === \"hex6\" || format === \"name\") {\r\n                    format = \"rgb\";\r\n                }\r\n            }\r\n\r\n            var realColor = get({ format: format }),\r\n                displayColor = '';\r\n\r\n             //reset background info for preview element\r\n            previewElement.removeClass(\"sp-clear-display\");\r\n            previewElement.css('background-color', 'transparent');\r\n\r\n            if (!realColor && allowEmpty) {\r\n                // Update the replaced elements background with icon indicating no color selection\r\n                previewElement.addClass(\"sp-clear-display\");\r\n            }\r\n            else {\r\n                var realHex = realColor.toHexString(),\r\n                    realRgb = realColor.toRgbString();\r\n\r\n                // Update the replaced elements background color (with actual selected color)\r\n                if (rgbaSupport || realColor.alpha === 1) {\r\n                    previewElement.css(\"background-color\", realRgb);\r\n                }\r\n                else {\r\n                    previewElement.css(\"background-color\", \"transparent\");\r\n                    previewElement.css(\"filter\", realColor.toFilter());\r\n                }\r\n\r\n                if (opts.showAlpha) {\r\n                    var rgb = realColor.toRgb();\r\n                    rgb.a = 0;\r\n                    var realAlpha = tinycolor(rgb).toRgbString();\r\n                    var gradient = \"linear-gradient(left, \" + realAlpha + \", \" + realHex + \")\";\r\n\r\n                    if (IE) {\r\n                        alphaSliderInner.css(\"filter\", tinycolor(realAlpha).toFilter({ gradientType: 1 }, realHex));\r\n                    }\r\n                    else {\r\n                        alphaSliderInner.css(\"background\", \"-webkit-\" + gradient);\r\n                        alphaSliderInner.css(\"background\", \"-moz-\" + gradient);\r\n                        alphaSliderInner.css(\"background\", \"-ms-\" + gradient);\r\n                        // Use current syntax gradient on unprefixed property.\r\n                        alphaSliderInner.css(\"background\",\r\n                            \"linear-gradient(to right, \" + realAlpha + \", \" + realHex + \")\");\r\n                    }\r\n                }\r\n\r\n                displayColor = realColor.toString(format);\r\n            }\r\n\r\n            // Update the text entry input as it changes happen\r\n            if (opts.showInput) {\r\n                textInput.val(displayColor);\r\n            }\r\n\r\n            if (opts.showPalette) {\r\n                drawPalette();\r\n            }\r\n\r\n            drawInitial();\r\n        }\r\n\r\n        function updateHelperLocations() {\r\n            var s = currentSaturation;\r\n            var v = currentValue;\r\n\r\n            if(allowEmpty && isEmpty) {\r\n                //if selected color is empty, hide the helpers\r\n                alphaSlideHelper.hide();\r\n                slideHelper.hide();\r\n                dragHelper.hide();\r\n            }\r\n            else {\r\n                //make sure helpers are visible\r\n                alphaSlideHelper.show();\r\n                slideHelper.show();\r\n                dragHelper.show();\r\n\r\n                // Where to show the little circle in that displays your current selected color\r\n                var dragX = s * dragWidth;\r\n                var dragY = dragHeight - (v * dragHeight);\r\n                dragX = Math.max(\r\n                    -dragHelperHeight,\r\n                    Math.min(dragWidth - dragHelperHeight, dragX - dragHelperHeight)\r\n                );\r\n                dragY = Math.max(\r\n                    -dragHelperHeight,\r\n                    Math.min(dragHeight - dragHelperHeight, dragY - dragHelperHeight)\r\n                );\r\n                dragHelper.css({\r\n                    \"top\": dragY + \"px\",\r\n                    \"left\": dragX + \"px\"\r\n                });\r\n\r\n                var alphaX = currentAlpha * alphaWidth;\r\n                alphaSlideHelper.css({\r\n                    \"left\": (alphaX - (alphaSlideHelperWidth / 2)) + \"px\"\r\n                });\r\n\r\n                // Where to show the bar that displays your current selected hue\r\n                var slideY = (currentHue) * slideHeight;\r\n                slideHelper.css({\r\n                    \"top\": (slideY - slideHelperHeight) + \"px\"\r\n                });\r\n            }\r\n        }\r\n\r\n        function updateOriginalInput(fireCallback) {\r\n            var color = get(),\r\n                displayColor = '',\r\n                hasChanged = !tinycolor.equals(color, colorOnShow);\r\n\r\n            if (color) {\r\n                displayColor = color.toString(currentPreferredFormat);\r\n                // Update the selection palette with the current color\r\n                addColorToSelectionPalette(color);\r\n            }\r\n\r\n            if (isInput) {\r\n                boundElement.val(displayColor);\r\n            }\r\n\r\n            if (fireCallback && hasChanged) {\r\n                callbacks.change(color);\r\n                boundElement.trigger('change', [ color ]);\r\n            }\r\n        }\r\n\r\n        function reflow() {\r\n            if (!visible) {\r\n                return; // Calculations would be useless and wouldn't be reliable anyways\r\n            }\r\n            dragWidth = dragger.width();\r\n            dragHeight = dragger.height();\r\n            dragHelperHeight = dragHelper.height();\r\n            slideWidth = slider.width();\r\n            slideHeight = slider.height();\r\n            slideHelperHeight = slideHelper.height();\r\n            alphaWidth = alphaSlider.width();\r\n            alphaSlideHelperWidth = alphaSlideHelper.width();\r\n\r\n            if (!flat) {\r\n                container.css(\"position\", \"absolute\");\r\n                if (opts.offset) {\r\n                    container.offset(opts.offset);\r\n                } else {\r\n                    container.offset(getOffset(container, offsetElement));\r\n                }\r\n            }\r\n\r\n            updateHelperLocations();\r\n\r\n            if (opts.showPalette) {\r\n                drawPalette();\r\n            }\r\n\r\n            boundElement.trigger('reflow.spectrum');\r\n        }\r\n\r\n        function destroy() {\r\n            boundElement.show();\r\n            offsetElement.unbind(\"click.spectrum touchstart.spectrum\");\r\n            container.remove();\r\n            replacer.remove();\r\n            spectrums[spect.id] = null;\r\n        }\r\n\r\n        function option(optionName, optionValue) {\r\n            if (optionName === undefined) {\r\n                return $.extend({}, opts);\r\n            }\r\n            if (optionValue === undefined) {\r\n                return opts[optionName];\r\n            }\r\n\r\n            opts[optionName] = optionValue;\r\n\r\n            if (optionName === \"preferredFormat\") {\r\n                currentPreferredFormat = opts.preferredFormat;\r\n            }\r\n            applyOptions();\r\n        }\r\n\r\n        function enable() {\r\n            disabled = false;\r\n            boundElement.attr(\"disabled\", false);\r\n            offsetElement.removeClass(\"sp-disabled\");\r\n        }\r\n\r\n        function disable() {\r\n            hide();\r\n            disabled = true;\r\n            boundElement.attr(\"disabled\", true);\r\n            offsetElement.addClass(\"sp-disabled\");\r\n        }\r\n\r\n        function setOffset(coord) {\r\n            opts.offset = coord;\r\n            reflow();\r\n        }\r\n\r\n        initialize();\r\n\r\n        var spect = {\r\n            show: show,\r\n            hide: hide,\r\n            toggle: toggle,\r\n            reflow: reflow,\r\n            option: option,\r\n            enable: enable,\r\n            disable: disable,\r\n            offset: setOffset,\r\n            set: function (c) {\r\n                set(c);\r\n                updateOriginalInput();\r\n            },\r\n            get: get,\r\n            destroy: destroy,\r\n            container: container\r\n        };\r\n\r\n        spect.id = spectrums.push(spect) - 1;\r\n\r\n        return spect;\r\n    }\r\n\r\n    /**\r\n    * checkOffset - get the offset below/above and left/right element depending on screen position\r\n    * Thanks https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js\r\n    */\r\n    function getOffset(picker, input) {\r\n        var extraY = 0;\r\n        var dpWidth = picker.outerWidth();\r\n        var dpHeight = picker.outerHeight();\r\n        var inputHeight = input.outerHeight();\r\n        var doc = picker[0].ownerDocument;\r\n        var docElem = doc.documentElement;\r\n        var viewWidth = docElem.clientWidth + $(doc).scrollLeft();\r\n        var viewHeight = docElem.clientHeight + $(doc).scrollTop();\r\n        var offset = input.offset();\r\n        offset.top += inputHeight;\r\n\r\n        offset.left -=\r\n            Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n            Math.abs(offset.left + dpWidth - viewWidth) : 0);\r\n\r\n        offset.top -=\r\n            Math.min(offset.top, ((offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n            Math.abs(dpHeight + inputHeight - extraY) : extraY));\r\n\r\n        return offset;\r\n    }\r\n\r\n    /**\r\n    * noop - do nothing\r\n    */\r\n    function noop() {\r\n\r\n    }\r\n\r\n    /**\r\n    * stopPropagation - makes the code only doing this a little easier to read in line\r\n    */\r\n    function stopPropagation(e) {\r\n        e.stopPropagation();\r\n    }\r\n\r\n    /**\r\n    * Create a function bound to a given object\r\n    * Thanks to underscore.js\r\n    */\r\n    function bind(func, obj) {\r\n        var slice = Array.prototype.slice;\r\n        var args = slice.call(arguments, 2);\r\n        return function () {\r\n            return func.apply(obj, args.concat(slice.call(arguments)));\r\n        };\r\n    }\r\n\r\n    /**\r\n    * Lightweight drag helper.  Handles containment within the element, so that\r\n    * when dragging, the x is within [0,element.width] and y is within [0,element.height]\r\n    */\r\n    function draggable(element, onmove, onstart, onstop) {\r\n        onmove = onmove || function () { };\r\n        onstart = onstart || function () { };\r\n        onstop = onstop || function () { };\r\n        var doc = document;\r\n        var dragging = false;\r\n        var offset = {};\r\n        var maxHeight = 0;\r\n        var maxWidth = 0;\r\n        var hasTouch = ('ontouchstart' in window);\r\n\r\n        var duringDragEvents = {};\r\n        duringDragEvents[\"selectstart\"] = prevent;\r\n        duringDragEvents[\"dragstart\"] = prevent;\r\n        duringDragEvents[\"touchmove mousemove\"] = move;\r\n        duringDragEvents[\"touchend mouseup\"] = stop;\r\n\r\n        function prevent(e) {\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            }\r\n            if (e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            e.returnValue = false;\r\n        }\r\n\r\n        function move(e) {\r\n            if (dragging) {\r\n                // Mouseup happened outside of window\r\n                if (IE && doc.documentMode < 9 && !e.button) {\r\n                    return stop();\r\n                }\r\n\r\n                var t0 = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0];\r\n                var pageX = t0 && t0.pageX || e.pageX;\r\n                var pageY = t0 && t0.pageY || e.pageY;\r\n\r\n                var dragX = Math.max(0, Math.min(pageX - offset.left, maxWidth));\r\n                var dragY = Math.max(0, Math.min(pageY - offset.top, maxHeight));\r\n\r\n                if (hasTouch) {\r\n                    // Stop scrolling in iOS\r\n                    prevent(e);\r\n                }\r\n\r\n                onmove.apply(element, [dragX, dragY, e]);\r\n            }\r\n        }\r\n\r\n        function start(e) {\r\n            var rightclick = (e.which) ? (e.which == 3) : (e.button == 2);\r\n\r\n            if (!rightclick && !dragging) {\r\n                if (onstart.apply(element, arguments) !== false) {\r\n                    dragging = true;\r\n                    maxHeight = $(element).height();\r\n                    maxWidth = $(element).width();\r\n                    offset = $(element).offset();\r\n\r\n                    $(doc).bind(duringDragEvents);\r\n                    $(doc.body).addClass(\"sp-dragging\");\r\n\r\n                    move(e);\r\n\r\n                    prevent(e);\r\n                }\r\n            }\r\n        }\r\n\r\n        function stop() {\r\n            if (dragging) {\r\n                $(doc).unbind(duringDragEvents);\r\n                $(doc.body).removeClass(\"sp-dragging\");\r\n\r\n                // Wait a tick before notifying observers to allow the click event\r\n                // to fire in Chrome.\r\n                setTimeout(function() {\r\n                    onstop.apply(element, arguments);\r\n                }, 0);\r\n            }\r\n            dragging = false;\r\n        }\r\n\r\n        $(element).bind(\"touchstart mousedown\", start);\r\n    }\r\n\r\n    function throttle(func, wait, debounce) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var throttler = function () {\r\n                timeout = null;\r\n                func.apply(context, args);\r\n            };\r\n            if (debounce) clearTimeout(timeout);\r\n            if (debounce || !timeout) timeout = setTimeout(throttler, wait);\r\n        };\r\n    }\r\n\r\n    function inputTypeColorSupport() {\r\n        return $.fn.spectrum.inputTypeColorSupport();\r\n    }\r\n\r\n    /**\r\n    * Define a jQuery plugin\r\n    */\r\n    var dataID = \"spectrum.id\";\r\n    $.fn.spectrum = function (opts, extra) {\r\n\r\n        if (typeof opts == \"string\") {\r\n\r\n            var returnValue = this;\r\n            var args = Array.prototype.slice.call( arguments, 1 );\r\n\r\n            this.each(function () {\r\n                var spect = spectrums[$(this).data(dataID)];\r\n                if (spect) {\r\n                    var method = spect[opts];\r\n                    if (!method) {\r\n                        throw new Error( \"Spectrum: no such method: '\" + opts + \"'\" );\r\n                    }\r\n\r\n                    if (opts == \"get\") {\r\n                        returnValue = spect.get();\r\n                    }\r\n                    else if (opts == \"container\") {\r\n                        returnValue = spect.container;\r\n                    }\r\n                    else if (opts == \"option\") {\r\n                        returnValue = spect.option.apply(spect, args);\r\n                    }\r\n                    else if (opts == \"destroy\") {\r\n                        spect.destroy();\r\n                        $(this).removeData(dataID);\r\n                    }\r\n                    else {\r\n                        method.apply(spect, args);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return returnValue;\r\n        }\r\n\r\n        // Initializing a new instance of spectrum\r\n        return this.spectrum(\"destroy\").each(function () {\r\n            var options = $.extend({}, opts, $(this).data());\r\n            var spect = spectrum(this, options);\r\n            $(this).data(dataID, spect.id);\r\n        });\r\n    };\r\n\r\n    $.fn.spectrum.load = true;\r\n    $.fn.spectrum.loadOpts = {};\r\n    $.fn.spectrum.draggable = draggable;\r\n    $.fn.spectrum.defaults = defaultOpts;\r\n    $.fn.spectrum.inputTypeColorSupport = function inputTypeColorSupport() {\r\n        if (typeof inputTypeColorSupport._cachedResult === \"undefined\") {\r\n            var colorInput = $(\"<input type='color'/>\")[0]; // if color element is supported, value will default to not null\r\n            inputTypeColorSupport._cachedResult = colorInput.type === \"color\" && colorInput.value !== \"\";\r\n        }\r\n        return inputTypeColorSupport._cachedResult;\r\n    };\r\n\r\n    $.spectrum = { };\r\n    $.spectrum.localization = { };\r\n    $.spectrum.palettes = { };\r\n\r\n    $.fn.spectrum.processNativeColorInputs = function () {\r\n        var colorInputs = $(\"input[type=color]\");\r\n        if (colorInputs.length && !inputTypeColorSupport()) {\r\n            colorInputs.spectrum({\r\n                preferredFormat: \"hex6\"\r\n            });\r\n        }\r\n    };\r\n\r\n    // TinyColor v1.1.2\r\n    // https://github.com/bgrins/TinyColor\r\n    // Brian Grinstead, MIT License\r\n\r\n    (function() {\r\n\r\n    var trimLeft = /^[\\s,#]+/,\r\n        trimRight = /\\s+$/,\r\n        tinyCounter = 0,\r\n        math = Math,\r\n        mathRound = math.round,\r\n        mathMin = math.min,\r\n        mathMax = math.max,\r\n        mathRandom = math.random;\r\n\r\n    var tinycolor = function(color, opts) {\r\n\r\n        color = (color) ? color : '';\r\n        opts = opts || { };\r\n\r\n        // If input is already a tinycolor, return itself\r\n        if (color instanceof tinycolor) {\r\n           return color;\r\n        }\r\n        // If we are called as a function, call using new instead\r\n        if (!(this instanceof tinycolor)) {\r\n            return new tinycolor(color, opts);\r\n        }\r\n\r\n        var rgb = inputToRGB(color);\r\n        this._originalInput = color,\r\n        this._r = rgb.r,\r\n        this._g = rgb.g,\r\n        this._b = rgb.b,\r\n        this._a = rgb.a,\r\n        this._roundA = mathRound(100*this._a) / 100,\r\n        this._format = opts.format || rgb.format;\r\n        this._gradientType = opts.gradientType;\r\n\r\n        // Don't let the range of [0,255] come back in [0,1].\r\n        // Potentially lose a little bit of precision here, but will fix issues where\r\n        // .5 gets interpreted as half of the total, instead of half of 1\r\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\r\n        if (this._r < 1) { this._r = mathRound(this._r); }\r\n        if (this._g < 1) { this._g = mathRound(this._g); }\r\n        if (this._b < 1) { this._b = mathRound(this._b); }\r\n\r\n        this._ok = rgb.ok;\r\n        this._tc_id = tinyCounter++;\r\n    };\r\n\r\n    tinycolor.prototype = {\r\n        isDark: function() {\r\n            return this.getBrightness() < 128;\r\n        },\r\n        isLight: function() {\r\n            return !this.isDark();\r\n        },\r\n        isValid: function() {\r\n            return this._ok;\r\n        },\r\n        getOriginalInput: function() {\r\n          return this._originalInput;\r\n        },\r\n        getFormat: function() {\r\n            return this._format;\r\n        },\r\n        getAlpha: function() {\r\n            return this._a;\r\n        },\r\n        getBrightness: function() {\r\n            var rgb = this.toRgb();\r\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\r\n        },\r\n        setAlpha: function(value) {\r\n            this._a = boundAlpha(value);\r\n            this._roundA = mathRound(100*this._a) / 100;\r\n            return this;\r\n        },\r\n        toHsv: function() {\r\n            var hsv = rgbToHsv(this._r, this._g, this._b);\r\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\r\n        },\r\n        toHsvString: function() {\r\n            var hsv = rgbToHsv(this._r, this._g, this._b);\r\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\r\n            return (this._a == 1) ?\r\n              \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\r\n              \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\r\n        },\r\n        toHsl: function() {\r\n            var hsl = rgbToHsl(this._r, this._g, this._b);\r\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\r\n        },\r\n        toHslString: function() {\r\n            var hsl = rgbToHsl(this._r, this._g, this._b);\r\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\r\n            return (this._a == 1) ?\r\n              \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\r\n              \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\r\n        },\r\n        toHex: function(allow3Char) {\r\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\r\n        },\r\n        toHexString: function(allow3Char) {\r\n            return '#' + this.toHex(allow3Char);\r\n        },\r\n        toHex8: function() {\r\n            return rgbaToHex(this._r, this._g, this._b, this._a);\r\n        },\r\n        toHex8String: function() {\r\n            return '#' + this.toHex8();\r\n        },\r\n        toRgb: function() {\r\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\r\n        },\r\n        toRgbString: function() {\r\n            return (this._a == 1) ?\r\n              \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\r\n              \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\r\n        },\r\n        toPercentageRgb: function() {\r\n            return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\r\n        },\r\n        toPercentageRgbString: function() {\r\n            return (this._a == 1) ?\r\n              \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\r\n              \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\r\n        },\r\n        toName: function() {\r\n            if (this._a === 0) {\r\n                return \"transparent\";\r\n            }\r\n\r\n            if (this._a < 1) {\r\n                return false;\r\n            }\r\n\r\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\r\n        },\r\n        toFilter: function(secondColor) {\r\n            var hex8String = '#' + rgbaToHex(this._r, this._g, this._b, this._a);\r\n            var secondHex8String = hex8String;\r\n            var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\r\n\r\n            if (secondColor) {\r\n                var s = tinycolor(secondColor);\r\n                secondHex8String = s.toHex8String();\r\n            }\r\n\r\n            return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\r\n        },\r\n        toString: function(format) {\r\n            var formatSet = !!format;\r\n            format = format || this._format;\r\n\r\n            var formattedString = false;\r\n            var hasAlpha = this._a < 1 && this._a >= 0;\r\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"name\");\r\n\r\n            if (needsAlphaFormat) {\r\n                // Special case for \"transparent\", all other non-alpha formats\r\n                // will return rgba when there is transparency.\r\n                if (format === \"name\" && this._a === 0) {\r\n                    return this.toName();\r\n                }\r\n                return this.toRgbString();\r\n            }\r\n            if (format === \"rgb\") {\r\n                formattedString = this.toRgbString();\r\n            }\r\n            if (format === \"prgb\") {\r\n                formattedString = this.toPercentageRgbString();\r\n            }\r\n            if (format === \"hex\" || format === \"hex6\") {\r\n                formattedString = this.toHexString();\r\n            }\r\n            if (format === \"hex3\") {\r\n                formattedString = this.toHexString(true);\r\n            }\r\n            if (format === \"hex8\") {\r\n                formattedString = this.toHex8String();\r\n            }\r\n            if (format === \"name\") {\r\n                formattedString = this.toName();\r\n            }\r\n            if (format === \"hsl\") {\r\n                formattedString = this.toHslString();\r\n            }\r\n            if (format === \"hsv\") {\r\n                formattedString = this.toHsvString();\r\n            }\r\n\r\n            return formattedString || this.toHexString();\r\n        },\r\n\r\n        _applyModification: function(fn, args) {\r\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\r\n            this._r = color._r;\r\n            this._g = color._g;\r\n            this._b = color._b;\r\n            this.setAlpha(color._a);\r\n            return this;\r\n        },\r\n        lighten: function() {\r\n            return this._applyModification(lighten, arguments);\r\n        },\r\n        brighten: function() {\r\n            return this._applyModification(brighten, arguments);\r\n        },\r\n        darken: function() {\r\n            return this._applyModification(darken, arguments);\r\n        },\r\n        desaturate: function() {\r\n            return this._applyModification(desaturate, arguments);\r\n        },\r\n        saturate: function() {\r\n            return this._applyModification(saturate, arguments);\r\n        },\r\n        greyscale: function() {\r\n            return this._applyModification(greyscale, arguments);\r\n        },\r\n        spin: function() {\r\n            return this._applyModification(spin, arguments);\r\n        },\r\n\r\n        _applyCombination: function(fn, args) {\r\n            return fn.apply(null, [this].concat([].slice.call(args)));\r\n        },\r\n        analogous: function() {\r\n            return this._applyCombination(analogous, arguments);\r\n        },\r\n        complement: function() {\r\n            return this._applyCombination(complement, arguments);\r\n        },\r\n        monochromatic: function() {\r\n            return this._applyCombination(monochromatic, arguments);\r\n        },\r\n        splitcomplement: function() {\r\n            return this._applyCombination(splitcomplement, arguments);\r\n        },\r\n        triad: function() {\r\n            return this._applyCombination(triad, arguments);\r\n        },\r\n        tetrad: function() {\r\n            return this._applyCombination(tetrad, arguments);\r\n        }\r\n    };\r\n\r\n    // If input is an object, force 1 into \"1.0\" to handle ratios properly\r\n    // String input requires \"1.0\" as input, so 1 will be treated as 1\r\n    tinycolor.fromRatio = function(color, opts) {\r\n        if (typeof color == \"object\") {\r\n            var newColor = {};\r\n            for (var i in color) {\r\n                if (color.hasOwnProperty(i)) {\r\n                    if (i === \"a\") {\r\n                        newColor[i] = color[i];\r\n                    }\r\n                    else {\r\n                        newColor[i] = convertToPercentage(color[i]);\r\n                    }\r\n                }\r\n            }\r\n            color = newColor;\r\n        }\r\n\r\n        return tinycolor(color, opts);\r\n    };\r\n\r\n    // Given a string or object, convert that input to RGB\r\n    // Possible string inputs:\r\n    //\r\n    //     \"red\"\r\n    //     \"#f00\" or \"f00\"\r\n    //     \"#ff0000\" or \"ff0000\"\r\n    //     \"#ff000000\" or \"ff000000\"\r\n    //     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\r\n    //     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\r\n    //     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\r\n    //     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\r\n    //     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\r\n    //     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\r\n    //     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\r\n    //\r\n    function inputToRGB(color) {\r\n\r\n        var rgb = { r: 0, g: 0, b: 0 };\r\n        var a = 1;\r\n        var ok = false;\r\n        var format = false;\r\n\r\n        if (typeof color == \"string\") {\r\n            color = stringInputToObject(color);\r\n        }\r\n\r\n        if (typeof color == \"object\") {\r\n            if (color.hasOwnProperty(\"r\") && color.hasOwnProperty(\"g\") && color.hasOwnProperty(\"b\")) {\r\n                rgb = rgbToRgb(color.r, color.g, color.b);\r\n                ok = true;\r\n                format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\r\n            }\r\n            else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"v\")) {\r\n                color.s = convertToPercentage(color.s);\r\n                color.v = convertToPercentage(color.v);\r\n                rgb = hsvToRgb(color.h, color.s, color.v);\r\n                ok = true;\r\n                format = \"hsv\";\r\n            }\r\n            else if (color.hasOwnProperty(\"h\") && color.hasOwnProperty(\"s\") && color.hasOwnProperty(\"l\")) {\r\n                color.s = convertToPercentage(color.s);\r\n                color.l = convertToPercentage(color.l);\r\n                rgb = hslToRgb(color.h, color.s, color.l);\r\n                ok = true;\r\n                format = \"hsl\";\r\n            }\r\n\r\n            if (color.hasOwnProperty(\"a\")) {\r\n                a = color.a;\r\n            }\r\n        }\r\n\r\n        a = boundAlpha(a);\r\n\r\n        return {\r\n            ok: ok,\r\n            format: color.format || format,\r\n            r: mathMin(255, mathMax(rgb.r, 0)),\r\n            g: mathMin(255, mathMax(rgb.g, 0)),\r\n            b: mathMin(255, mathMax(rgb.b, 0)),\r\n            a: a\r\n        };\r\n    }\r\n\r\n\r\n    // Conversion Functions\r\n    // --------------------\r\n\r\n    // `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\r\n    // <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\r\n\r\n    // `rgbToRgb`\r\n    // Handle bounds / percentage checking to conform to CSS color spec\r\n    // <http://www.w3.org/TR/css3-color/>\r\n    // *Assumes:* r, g, b in [0, 255] or [0, 1]\r\n    // *Returns:* { r, g, b } in [0, 255]\r\n    function rgbToRgb(r, g, b){\r\n        return {\r\n            r: bound01(r, 255) * 255,\r\n            g: bound01(g, 255) * 255,\r\n            b: bound01(b, 255) * 255\r\n        };\r\n    }\r\n\r\n    // `rgbToHsl`\r\n    // Converts an RGB color value to HSL.\r\n    // *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\r\n    // *Returns:* { h, s, l } in [0,1]\r\n    function rgbToHsl(r, g, b) {\r\n\r\n        r = bound01(r, 255);\r\n        g = bound01(g, 255);\r\n        b = bound01(b, 255);\r\n\r\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\r\n        var h, s, l = (max + min) / 2;\r\n\r\n        if(max == min) {\r\n            h = s = 0; // achromatic\r\n        }\r\n        else {\r\n            var d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch(max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n\r\n            h /= 6;\r\n        }\r\n\r\n        return { h: h, s: s, l: l };\r\n    }\r\n\r\n    // `hslToRgb`\r\n    // Converts an HSL color value to RGB.\r\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\r\n    // *Returns:* { r, g, b } in the set [0, 255]\r\n    function hslToRgb(h, s, l) {\r\n        var r, g, b;\r\n\r\n        h = bound01(h, 360);\r\n        s = bound01(s, 100);\r\n        l = bound01(l, 100);\r\n\r\n        function hue2rgb(p, q, t) {\r\n            if(t < 0) t += 1;\r\n            if(t > 1) t -= 1;\r\n            if(t < 1/6) return p + (q - p) * 6 * t;\r\n            if(t < 1/2) return q;\r\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\r\n            return p;\r\n        }\r\n\r\n        if(s === 0) {\r\n            r = g = b = l; // achromatic\r\n        }\r\n        else {\r\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            var p = 2 * l - q;\r\n            r = hue2rgb(p, q, h + 1/3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1/3);\r\n        }\r\n\r\n        return { r: r * 255, g: g * 255, b: b * 255 };\r\n    }\r\n\r\n    // `rgbToHsv`\r\n    // Converts an RGB color value to HSV\r\n    // *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\r\n    // *Returns:* { h, s, v } in [0,1]\r\n    function rgbToHsv(r, g, b) {\r\n\r\n        r = bound01(r, 255);\r\n        g = bound01(g, 255);\r\n        b = bound01(b, 255);\r\n\r\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\r\n        var h, s, v = max;\r\n\r\n        var d = max - min;\r\n        s = max === 0 ? 0 : d / max;\r\n\r\n        if(max == min) {\r\n            h = 0; // achromatic\r\n        }\r\n        else {\r\n            switch(max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return { h: h, s: s, v: v };\r\n    }\r\n\r\n    // `hsvToRgb`\r\n    // Converts an HSV color value to RGB.\r\n    // *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\r\n    // *Returns:* { r, g, b } in the set [0, 255]\r\n     function hsvToRgb(h, s, v) {\r\n\r\n        h = bound01(h, 360) * 6;\r\n        s = bound01(s, 100);\r\n        v = bound01(v, 100);\r\n\r\n        var i = math.floor(h),\r\n            f = h - i,\r\n            p = v * (1 - s),\r\n            q = v * (1 - f * s),\r\n            t = v * (1 - (1 - f) * s),\r\n            mod = i % 6,\r\n            r = [v, q, p, p, t, v][mod],\r\n            g = [t, v, v, q, p, p][mod],\r\n            b = [p, p, t, v, v, q][mod];\r\n\r\n        return { r: r * 255, g: g * 255, b: b * 255 };\r\n    }\r\n\r\n    // `rgbToHex`\r\n    // Converts an RGB color to hex\r\n    // Assumes r, g, and b are contained in the set [0, 255]\r\n    // Returns a 3 or 6 character hex\r\n    function rgbToHex(r, g, b, allow3Char) {\r\n\r\n        var hex = [\r\n            pad2(mathRound(r).toString(16)),\r\n            pad2(mathRound(g).toString(16)),\r\n            pad2(mathRound(b).toString(16))\r\n        ];\r\n\r\n        // Return a 3 character hex if possible\r\n        if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\r\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\r\n        }\r\n\r\n        return hex.join(\"\");\r\n    }\r\n        // `rgbaToHex`\r\n        // Converts an RGBA color plus alpha transparency to hex\r\n        // Assumes r, g, b and a are contained in the set [0, 255]\r\n        // Returns an 8 character hex\r\n        function rgbaToHex(r, g, b, a) {\r\n\r\n            var hex = [\r\n                pad2(convertDecimalToHex(a)),\r\n                pad2(mathRound(r).toString(16)),\r\n                pad2(mathRound(g).toString(16)),\r\n                pad2(mathRound(b).toString(16))\r\n            ];\r\n\r\n            return hex.join(\"\");\r\n        }\r\n\r\n    // `equals`\r\n    // Can be called with any tinycolor input\r\n    tinycolor.equals = function (color1, color2) {\r\n        if (!color1 || !color2) { return false; }\r\n        return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\r\n    };\r\n    tinycolor.random = function() {\r\n        return tinycolor.fromRatio({\r\n            r: mathRandom(),\r\n            g: mathRandom(),\r\n            b: mathRandom()\r\n        });\r\n    };\r\n\r\n\r\n    // Modification Functions\r\n    // ----------------------\r\n    // Thanks to less.js for some of the basics here\r\n    // <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\r\n\r\n    function desaturate(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.s -= amount / 100;\r\n        hsl.s = clamp01(hsl.s);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function saturate(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.s += amount / 100;\r\n        hsl.s = clamp01(hsl.s);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function greyscale(color) {\r\n        return tinycolor(color).desaturate(100);\r\n    }\r\n\r\n    function lighten (color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.l += amount / 100;\r\n        hsl.l = clamp01(hsl.l);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function brighten(color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var rgb = tinycolor(color).toRgb();\r\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\r\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\r\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\r\n        return tinycolor(rgb);\r\n    }\r\n\r\n    function darken (color, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 10);\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.l -= amount / 100;\r\n        hsl.l = clamp01(hsl.l);\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    // Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\r\n    // Values outside of this range will be wrapped into this range.\r\n    function spin(color, amount) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var hue = (mathRound(hsl.h) + amount) % 360;\r\n        hsl.h = hue < 0 ? 360 + hue : hue;\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    // Combination Functions\r\n    // ---------------------\r\n    // Thanks to jQuery xColor for some of the ideas behind these\r\n    // <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\r\n\r\n    function complement(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        hsl.h = (hsl.h + 180) % 360;\r\n        return tinycolor(hsl);\r\n    }\r\n\r\n    function triad(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\r\n        ];\r\n    }\r\n\r\n    function tetrad(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\r\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\r\n        ];\r\n    }\r\n\r\n    function splitcomplement(color) {\r\n        var hsl = tinycolor(color).toHsl();\r\n        var h = hsl.h;\r\n        return [\r\n            tinycolor(color),\r\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\r\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\r\n        ];\r\n    }\r\n\r\n    function analogous(color, results, slices) {\r\n        results = results || 6;\r\n        slices = slices || 30;\r\n\r\n        var hsl = tinycolor(color).toHsl();\r\n        var part = 360 / slices;\r\n        var ret = [tinycolor(color)];\r\n\r\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\r\n            hsl.h = (hsl.h + part) % 360;\r\n            ret.push(tinycolor(hsl));\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    function monochromatic(color, results) {\r\n        results = results || 6;\r\n        var hsv = tinycolor(color).toHsv();\r\n        var h = hsv.h, s = hsv.s, v = hsv.v;\r\n        var ret = [];\r\n        var modification = 1 / results;\r\n\r\n        while (results--) {\r\n            ret.push(tinycolor({ h: h, s: s, v: v}));\r\n            v = (v + modification) % 1;\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    // Utility Functions\r\n    // ---------------------\r\n\r\n    tinycolor.mix = function(color1, color2, amount) {\r\n        amount = (amount === 0) ? 0 : (amount || 50);\r\n\r\n        var rgb1 = tinycolor(color1).toRgb();\r\n        var rgb2 = tinycolor(color2).toRgb();\r\n\r\n        var p = amount / 100;\r\n        var w = p * 2 - 1;\r\n        var a = rgb2.a - rgb1.a;\r\n\r\n        var w1;\r\n\r\n        if (w * a == -1) {\r\n            w1 = w;\r\n        } else {\r\n            w1 = (w + a) / (1 + w * a);\r\n        }\r\n\r\n        w1 = (w1 + 1) / 2;\r\n\r\n        var w2 = 1 - w1;\r\n\r\n        var rgba = {\r\n            r: rgb2.r * w1 + rgb1.r * w2,\r\n            g: rgb2.g * w1 + rgb1.g * w2,\r\n            b: rgb2.b * w1 + rgb1.b * w2,\r\n            a: rgb2.a * p  + rgb1.a * (1 - p)\r\n        };\r\n\r\n        return tinycolor(rgba);\r\n    };\r\n\r\n\r\n    // Readability Functions\r\n    // ---------------------\r\n    // <http://www.w3.org/TR/AERT#color-contrast>\r\n\r\n    // `readability`\r\n    // Analyze the 2 colors and returns an object with the following properties:\r\n    //    `brightness`: difference in brightness between the two colors\r\n    //    `color`: difference in color/hue between the two colors\r\n    tinycolor.readability = function(color1, color2) {\r\n        var c1 = tinycolor(color1);\r\n        var c2 = tinycolor(color2);\r\n        var rgb1 = c1.toRgb();\r\n        var rgb2 = c2.toRgb();\r\n        var brightnessA = c1.getBrightness();\r\n        var brightnessB = c2.getBrightness();\r\n        var colorDiff = (\r\n            Math.max(rgb1.r, rgb2.r) - Math.min(rgb1.r, rgb2.r) +\r\n            Math.max(rgb1.g, rgb2.g) - Math.min(rgb1.g, rgb2.g) +\r\n            Math.max(rgb1.b, rgb2.b) - Math.min(rgb1.b, rgb2.b)\r\n        );\r\n\r\n        return {\r\n            brightness: Math.abs(brightnessA - brightnessB),\r\n            color: colorDiff\r\n        };\r\n    };\r\n\r\n    // `readable`\r\n    // http://www.w3.org/TR/AERT#color-contrast\r\n    // Ensure that foreground and background color combinations provide sufficient contrast.\r\n    // *Example*\r\n    //    tinycolor.isReadable(\"#000\", \"#111\") => false\r\n    tinycolor.isReadable = function(color1, color2) {\r\n        var readability = tinycolor.readability(color1, color2);\r\n        return readability.brightness > 125 && readability.color > 500;\r\n    };\r\n\r\n    // `mostReadable`\r\n    // Given a base color and a list of possible foreground or background\r\n    // colors for that base, returns the most readable color.\r\n    // *Example*\r\n    //    tinycolor.mostReadable(\"#123\", [\"#fff\", \"#000\"]) => \"#000\"\r\n    tinycolor.mostReadable = function(baseColor, colorList) {\r\n        var bestColor = null;\r\n        var bestScore = 0;\r\n        var bestIsReadable = false;\r\n        for (var i=0; i < colorList.length; i++) {\r\n\r\n            // We normalize both around the \"acceptable\" breaking point,\r\n            // but rank brightness constrast higher than hue.\r\n\r\n            var readability = tinycolor.readability(baseColor, colorList[i]);\r\n            var readable = readability.brightness > 125 && readability.color > 500;\r\n            var score = 3 * (readability.brightness / 125) + (readability.color / 500);\r\n\r\n            if ((readable && ! bestIsReadable) ||\r\n                (readable && bestIsReadable && score > bestScore) ||\r\n                ((! readable) && (! bestIsReadable) && score > bestScore)) {\r\n                bestIsReadable = readable;\r\n                bestScore = score;\r\n                bestColor = tinycolor(colorList[i]);\r\n            }\r\n        }\r\n        return bestColor;\r\n    };\r\n\r\n\r\n    // Big List of Colors\r\n    // ------------------\r\n    // <http://www.w3.org/TR/css3-color/#svg-color>\r\n    var names = tinycolor.names = {\r\n        aliceblue: \"f0f8ff\",\r\n        antiquewhite: \"faebd7\",\r\n        aqua: \"0ff\",\r\n        aquamarine: \"7fffd4\",\r\n        azure: \"f0ffff\",\r\n        beige: \"f5f5dc\",\r\n        bisque: \"ffe4c4\",\r\n        black: \"000\",\r\n        blanchedalmond: \"ffebcd\",\r\n        blue: \"00f\",\r\n        blueviolet: \"8a2be2\",\r\n        brown: \"a52a2a\",\r\n        burlywood: \"deb887\",\r\n        burntsienna: \"ea7e5d\",\r\n        cadetblue: \"5f9ea0\",\r\n        chartreuse: \"7fff00\",\r\n        chocolate: \"d2691e\",\r\n        coral: \"ff7f50\",\r\n        cornflowerblue: \"6495ed\",\r\n        cornsilk: \"fff8dc\",\r\n        crimson: \"dc143c\",\r\n        cyan: \"0ff\",\r\n        darkblue: \"00008b\",\r\n        darkcyan: \"008b8b\",\r\n        darkgoldenrod: \"b8860b\",\r\n        darkgray: \"a9a9a9\",\r\n        darkgreen: \"006400\",\r\n        darkgrey: \"a9a9a9\",\r\n        darkkhaki: \"bdb76b\",\r\n        darkmagenta: \"8b008b\",\r\n        darkolivegreen: \"556b2f\",\r\n        darkorange: \"ff8c00\",\r\n        darkorchid: \"9932cc\",\r\n        darkred: \"8b0000\",\r\n        darksalmon: \"e9967a\",\r\n        darkseagreen: \"8fbc8f\",\r\n        darkslateblue: \"483d8b\",\r\n        darkslategray: \"2f4f4f\",\r\n        darkslategrey: \"2f4f4f\",\r\n        darkturquoise: \"00ced1\",\r\n        darkviolet: \"9400d3\",\r\n        deeppink: \"ff1493\",\r\n        deepskyblue: \"00bfff\",\r\n        dimgray: \"696969\",\r\n        dimgrey: \"696969\",\r\n        dodgerblue: \"1e90ff\",\r\n        firebrick: \"b22222\",\r\n        floralwhite: \"fffaf0\",\r\n        forestgreen: \"228b22\",\r\n        fuchsia: \"f0f\",\r\n        gainsboro: \"dcdcdc\",\r\n        ghostwhite: \"f8f8ff\",\r\n        gold: \"ffd700\",\r\n        goldenrod: \"daa520\",\r\n        gray: \"808080\",\r\n        green: \"008000\",\r\n        greenyellow: \"adff2f\",\r\n        grey: \"808080\",\r\n        honeydew: \"f0fff0\",\r\n        hotpink: \"ff69b4\",\r\n        indianred: \"cd5c5c\",\r\n        indigo: \"4b0082\",\r\n        ivory: \"fffff0\",\r\n        khaki: \"f0e68c\",\r\n        lavender: \"e6e6fa\",\r\n        lavenderblush: \"fff0f5\",\r\n        lawngreen: \"7cfc00\",\r\n        lemonchiffon: \"fffacd\",\r\n        lightblue: \"add8e6\",\r\n        lightcoral: \"f08080\",\r\n        lightcyan: \"e0ffff\",\r\n        lightgoldenrodyellow: \"fafad2\",\r\n        lightgray: \"d3d3d3\",\r\n        lightgreen: \"90ee90\",\r\n        lightgrey: \"d3d3d3\",\r\n        lightpink: \"ffb6c1\",\r\n        lightsalmon: \"ffa07a\",\r\n        lightseagreen: \"20b2aa\",\r\n        lightskyblue: \"87cefa\",\r\n        lightslategray: \"789\",\r\n        lightslategrey: \"789\",\r\n        lightsteelblue: \"b0c4de\",\r\n        lightyellow: \"ffffe0\",\r\n        lime: \"0f0\",\r\n        limegreen: \"32cd32\",\r\n        linen: \"faf0e6\",\r\n        magenta: \"f0f\",\r\n        maroon: \"800000\",\r\n        mediumaquamarine: \"66cdaa\",\r\n        mediumblue: \"0000cd\",\r\n        mediumorchid: \"ba55d3\",\r\n        mediumpurple: \"9370db\",\r\n        mediumseagreen: \"3cb371\",\r\n        mediumslateblue: \"7b68ee\",\r\n        mediumspringgreen: \"00fa9a\",\r\n        mediumturquoise: \"48d1cc\",\r\n        mediumvioletred: \"c71585\",\r\n        midnightblue: \"191970\",\r\n        mintcream: \"f5fffa\",\r\n        mistyrose: \"ffe4e1\",\r\n        moccasin: \"ffe4b5\",\r\n        navajowhite: \"ffdead\",\r\n        navy: \"000080\",\r\n        oldlace: \"fdf5e6\",\r\n        olive: \"808000\",\r\n        olivedrab: \"6b8e23\",\r\n        orange: \"ffa500\",\r\n        orangered: \"ff4500\",\r\n        orchid: \"da70d6\",\r\n        palegoldenrod: \"eee8aa\",\r\n        palegreen: \"98fb98\",\r\n        paleturquoise: \"afeeee\",\r\n        palevioletred: \"db7093\",\r\n        papayawhip: \"ffefd5\",\r\n        peachpuff: \"ffdab9\",\r\n        peru: \"cd853f\",\r\n        pink: \"ffc0cb\",\r\n        plum: \"dda0dd\",\r\n        powderblue: \"b0e0e6\",\r\n        purple: \"800080\",\r\n        rebeccapurple: \"663399\",\r\n        red: \"f00\",\r\n        rosybrown: \"bc8f8f\",\r\n        royalblue: \"4169e1\",\r\n        saddlebrown: \"8b4513\",\r\n        salmon: \"fa8072\",\r\n        sandybrown: \"f4a460\",\r\n        seagreen: \"2e8b57\",\r\n        seashell: \"fff5ee\",\r\n        sienna: \"a0522d\",\r\n        silver: \"c0c0c0\",\r\n        skyblue: \"87ceeb\",\r\n        slateblue: \"6a5acd\",\r\n        slategray: \"708090\",\r\n        slategrey: \"708090\",\r\n        snow: \"fffafa\",\r\n        springgreen: \"00ff7f\",\r\n        steelblue: \"4682b4\",\r\n        tan: \"d2b48c\",\r\n        teal: \"008080\",\r\n        thistle: \"d8bfd8\",\r\n        tomato: \"ff6347\",\r\n        turquoise: \"40e0d0\",\r\n        violet: \"ee82ee\",\r\n        wheat: \"f5deb3\",\r\n        white: \"fff\",\r\n        whitesmoke: \"f5f5f5\",\r\n        yellow: \"ff0\",\r\n        yellowgreen: \"9acd32\"\r\n    };\r\n\r\n    // Make it easy to access colors via `hexNames[hex]`\r\n    var hexNames = tinycolor.hexNames = flip(names);\r\n\r\n\r\n    // Utilities\r\n    // ---------\r\n\r\n    // `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\r\n    function flip(o) {\r\n        var flipped = { };\r\n        for (var i in o) {\r\n            if (o.hasOwnProperty(i)) {\r\n                flipped[o[i]] = i;\r\n            }\r\n        }\r\n        return flipped;\r\n    }\r\n\r\n    // Return a valid alpha value [0,1] with all invalid values being set to 1\r\n    function boundAlpha(a) {\r\n        a = parseFloat(a);\r\n\r\n        if (isNaN(a) || a < 0 || a > 1) {\r\n            a = 1;\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    // Take input from [0, n] and return it as [0, 1]\r\n    function bound01(n, max) {\r\n        if (isOnePointZero(n)) { n = \"100%\"; }\r\n\r\n        var processPercent = isPercentage(n);\r\n        n = mathMin(max, mathMax(0, parseFloat(n)));\r\n\r\n        // Automatically convert percentage into number\r\n        if (processPercent) {\r\n            n = parseInt(n * max, 10) / 100;\r\n        }\r\n\r\n        // Handle floating point rounding errors\r\n        if ((math.abs(n - max) < 0.000001)) {\r\n            return 1;\r\n        }\r\n\r\n        // Convert into [0, 1] range if it isn't already\r\n        return (n % max) / parseFloat(max);\r\n    }\r\n\r\n    // Force a number between 0 and 1\r\n    function clamp01(val) {\r\n        return mathMin(1, mathMax(0, val));\r\n    }\r\n\r\n    // Parse a base-16 hex value into a base-10 integer\r\n    function parseIntFromHex(val) {\r\n        return parseInt(val, 16);\r\n    }\r\n\r\n    // Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\r\n    // <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\r\n    function isOnePointZero(n) {\r\n        return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\r\n    }\r\n\r\n    // Check to see if string passed in is a percentage\r\n    function isPercentage(n) {\r\n        return typeof n === \"string\" && n.indexOf('%') != -1;\r\n    }\r\n\r\n    // Force a hex value to have 2 characters\r\n    function pad2(c) {\r\n        return c.length == 1 ? '0' + c : '' + c;\r\n    }\r\n\r\n    // Replace a decimal with it's percentage value\r\n    function convertToPercentage(n) {\r\n        if (n <= 1) {\r\n            n = (n * 100) + \"%\";\r\n        }\r\n\r\n        return n;\r\n    }\r\n\r\n    // Converts a decimal to a hex value\r\n    function convertDecimalToHex(d) {\r\n        return Math.round(parseFloat(d) * 255).toString(16);\r\n    }\r\n    // Converts a hex value to a decimal\r\n    function convertHexToDecimal(h) {\r\n        return (parseIntFromHex(h) / 255);\r\n    }\r\n\r\n    var matchers = (function() {\r\n\r\n        // <http://www.w3.org/TR/css3-values/#integers>\r\n        var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\r\n\r\n        // <http://www.w3.org/TR/css3-values/#number-value>\r\n        var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\r\n\r\n        // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\r\n        var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\r\n\r\n        // Actual matching.\r\n        // Parentheses and commas are optional, but not required.\r\n        // Whitespace can take the place of commas or opening paren\r\n        var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\r\n        var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\r\n\r\n        return {\r\n            rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\r\n            rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\r\n            hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\r\n            hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\r\n            hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\r\n            hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\r\n            hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\r\n            hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\r\n            hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\r\n        };\r\n    })();\r\n\r\n    // `stringInputToObject`\r\n    // Permissive string parsing.  Take in a number of formats, and output an object\r\n    // based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\r\n    function stringInputToObject(color) {\r\n\r\n        color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\r\n        var named = false;\r\n        if (names[color]) {\r\n            color = names[color];\r\n            named = true;\r\n        }\r\n        else if (color == 'transparent') {\r\n            return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\r\n        }\r\n\r\n        // Try to match string input using regular expressions.\r\n        // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\r\n        // Just return an object and let the conversion functions handle that.\r\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\r\n        var match;\r\n        if ((match = matchers.rgb.exec(color))) {\r\n            return { r: match[1], g: match[2], b: match[3] };\r\n        }\r\n        if ((match = matchers.rgba.exec(color))) {\r\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hsl.exec(color))) {\r\n            return { h: match[1], s: match[2], l: match[3] };\r\n        }\r\n        if ((match = matchers.hsla.exec(color))) {\r\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hsv.exec(color))) {\r\n            return { h: match[1], s: match[2], v: match[3] };\r\n        }\r\n        if ((match = matchers.hsva.exec(color))) {\r\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\r\n        }\r\n        if ((match = matchers.hex8.exec(color))) {\r\n            return {\r\n                a: convertHexToDecimal(match[1]),\r\n                r: parseIntFromHex(match[2]),\r\n                g: parseIntFromHex(match[3]),\r\n                b: parseIntFromHex(match[4]),\r\n                format: named ? \"name\" : \"hex8\"\r\n            };\r\n        }\r\n        if ((match = matchers.hex6.exec(color))) {\r\n            return {\r\n                r: parseIntFromHex(match[1]),\r\n                g: parseIntFromHex(match[2]),\r\n                b: parseIntFromHex(match[3]),\r\n                format: named ? \"name\" : \"hex\"\r\n            };\r\n        }\r\n        if ((match = matchers.hex3.exec(color))) {\r\n            return {\r\n                r: parseIntFromHex(match[1] + '' + match[1]),\r\n                g: parseIntFromHex(match[2] + '' + match[2]),\r\n                b: parseIntFromHex(match[3] + '' + match[3]),\r\n                format: named ? \"name\" : \"hex\"\r\n            };\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    window.tinycolor = tinycolor;\r\n    })();\r\n\r\n    $(function () {\r\n        if ($.fn.spectrum.load) {\r\n            $.fn.spectrum.processNativeColorInputs();\r\n        }\r\n    });\r\n\r\n});\r\n\nconst themes = document.querySelectorAll('.theme');\r\nconst body = document.querySelector('body');\r\nconst themeColor = document.querySelectorAll('.dark-color');\r\nconst themeBackground = document.querySelectorAll('.dark-');\r\nconst themeBorder = document.querySelectorAll('.dark-border');\r\nlet themeActive = document.querySelector('.dark-active');\r\nconst themeTitle = document.querySelector('.dark-title');\r\nconst themeWarningBackground = document.querySelector('.theme-warning-background');\r\nconst acceptRestart = document.querySelector('#accept-restart');\r\nconst declineRestart = document.querySelector('#decline-restart');\r\nlet customValueBody;\r\nlet customValueContent;\r\nconst applyCustomTheme = document.querySelector('#apply-custom-theme');\r\nlet customThemeActive = false;\r\n\r\nfunction colorPicker() {\r\n    $('#color-picker-body').spectrum({\r\n        color: '#9032e0',\r\n        showInput: true,\r\n        showInitial: true,\r\n        showAlpha: true,\r\n        preferredFormat: 'hex'\r\n    });\r\n    $('#color-picker-content').spectrum({\r\n        color: '#57dca3',\r\n        showInput: true,\r\n        showInitial: true,\r\n        showAlpha: true,\r\n        preferredFormat: 'hex'\r\n    });\r\n    customValueBody = $('#color-picker-body').spectrum('get');\r\n    customValueContent = $('#color-picker-content').spectrum('get');\r\n    $('#color-picker-body').on('change.spectrum', () => {\r\n        customValueBody = $('#color-picker-body').spectrum('get');\r\n    });\r\n    $('#color-picker-content').on('change.spectrum', () => {\r\n        customValueContent = $('#color-picker-content').spectrum('get');\r\n    });\r\n    applyCustomTheme.addEventListener('click', () => {\r\n        if (timerStarted || pomodorosCount >= 1) timerRestartThemeCustom(acceptRestart, declineRestart, themeWarningBackground, customValueBody, customValueContent);\r\n        else {\r\n            customThemeActive = true;\r\n            customThemeChanger(customValueBody, customValueContent);\r\n            if (breakSelected) titleBorderColor(true);\r\n        }\r\n    });\r\n}\r\n\r\nfunction customThemeChanger(bodyValue, contentValue) {\r\n    body.setAttribute('style', `background-color: ${bodyValue}; color: ${contentValue};`)\r\n    themeColor.forEach(element => {\r\n        element.setAttribute('style', `color: ${contentValue};`);\r\n    });\r\n    themeBorder.forEach(element => {\r\n        element.setAttribute('style', `border-color: ${contentValue}`);\r\n    });\r\n    if (breakSelected) breakTitle.setAttribute('style', `background: linear-gradient(to right, ${contentValue}, ${contentValue}) no-repeat; background-size: 100% 1.5px; background-position: left bottom`);\r\n    else sessionTitle.setAttribute('style', `background: linear-gradient(to right, ${contentValue}, ${contentValue}) no-repeat; background-size: 100% 1.5px; background-position: left bottom`);\r\n    themeTitle.setAttribute('style', `color: ${contentValue}`);\r\n    pomodoros.forEach(pomodoro => {\r\n        pomodoro.setAttribute('style', `border-color: ${contentValue}`);\r\n    });\r\n    hideModalSettings(modalSettings, settings);\r\n}\r\n\r\nfunction removeCustomTheme(fullRemove = false) {\r\n    if (fullRemove) customThemeActive = false;\r\n    body.style.backgroundColor = '';\r\n    body.style.color = '';\r\n    themeColor.forEach(element => {\r\n        element.style.color = '';\r\n    });\r\n    themeBorder.forEach(element => {\r\n        element.style.borderColor = '';\r\n    });\r\n    breakTitle.style.background = '';\r\n    themeActive.style.background = '';\r\n    themeActive.style.backgroundSize = '';\r\n    themeActive.style.backgroundPosition = '';\r\n    themeTitle.style.color = '';\r\n    pomodoros.forEach(pomodoro => {\r\n        pomodoro.style.borderColor = '';\r\n        pomodoro.style.backgroundColor = '';\r\n    });\r\n}\r\n\r\nfunction timerRestartTheme(accept, decline, themeWarning, theme) {\r\n    themeWarning.style.display = 'block';\r\n    accept.addEventListener('click', () => {\r\n        stopTimerHard(stop, sessionSeconds);\r\n        executeChangeTheme(theme, themeColor, themeBorder, themeActive, themeTitle, pomodoros, modalSettings);\r\n        if (customThemeActive) {\r\n            removeCustomTheme(true);\r\n        }\r\n        sessionTimeSelected = true;\r\n        breakTimeSelected = false;\r\n        breakSelected = false;\r\n        themeWarning.style.display = 'none';\r\n    });\r\n    decline.addEventListener('click', () => {\r\n        themeWarning.style.display = 'none';\r\n    });\r\n    window.addEventListener('click', function (e) {\r\n        if (e.target === themeWarning) themeWarning.style.display = 'none';\r\n    });\r\n}\r\n\r\nfunction timerRestartThemeCustom(accept, decline, themeWarning, bodyValue, contentValue) {\r\n    themeWarning.style.display = 'block';\r\n    accept.addEventListener('click', () => {\r\n        customThemeActive = true;\r\n        removeCustomTheme(false);\r\n        stopTimerHard(stop, sessionSeconds);\r\n        sessionTimeSelected = true;\r\n        breakTimeSelected = false;\r\n        breakSelected = false;\r\n        customThemeChanger(bodyValue, contentValue);\r\n        titleBorderColor(true)\r\n        themeWarning.style.display = 'none';\r\n    });\r\n    decline.addEventListener('click', () => {\r\n        themeWarning.style.display = 'none';\r\n    });\r\n    window.addEventListener('click', function (e) {\r\n        if (e.target === themeWarning) themeWarning.style.display = 'none';\r\n    });\r\n}\r\n\r\nfunction changeTheme(themes) {\r\n    themes.forEach(theme => {\r\n        theme.addEventListener('click', function () {\r\n            if (timerStarted || pomodorosCount >= 1) timerRestartTheme(acceptRestart, declineRestart, themeWarningBackground, theme);\r\n            else {\r\n                if (customThemeActive) removeCustomTheme(true);\r\n                setTimeout(() => {\r\n                    if (breakSelected) titleBorderColor(false);\r\n                }, 0);\r\n                executeChangeTheme(theme, themeColor, themeBorder, themeActive, themeTitle, pomodoros, modalSettings);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nfunction titleBorderColor(customThemeReset) {\r\n    if (!customThemeActive && !customThemeReset) {\r\n        let currentActive = sessionTitle.classList[sessionTitle.classList.length - 1];\r\n        breakTitle.classList = '';\r\n        breakTitle.classList.add(currentActive);\r\n        sessionTitle.classList = '';\r\n    } else if (customThemeReset) {\r\n        if (breakSelected) customThemeSwitch = false;\r\n        else customThemeSwitch = true;\r\n        sessionTitle.classList = '';\r\n        breakTitle.classList = '';\r\n\r\n    }\r\n}\r\n\r\nfunction executeChangeTheme(theme, themeColor, themeBorder, themeActive, themeTitle, pomodoros, modalSettings) {\r\n    body.classList = '';\r\n    body.classList.add(theme.classList[1]);\r\n    themeColor.forEach(element => {\r\n        element.classList.remove(element.classList[element.classList.length - 1]);\r\n        element.classList.add(`${theme.classList[1]}-color`);\r\n    });\r\n    themeBorder.forEach(element => {\r\n        element.classList.remove(element.classList[element.classList.length - 1]);\r\n        element.classList.add(`${theme.classList[1]}-border`);\r\n    });\r\n    themeActive.classList.remove(themeActive.classList[themeActive.classList.length - 1]);\r\n    themeActive.classList.add(`${theme.classList[1]}-active`);\r\n    themeActive = document.querySelector(`.${theme.classList[1]}-active`);\r\n    themeTitle.classList.remove(themeTitle.classList[themeTitle.classList.length - 1]);\r\n    themeTitle.classList.add(`${theme.classList[1]}-title`);\r\n    pomodoros.forEach(pomodoro => {\r\n        pomodoro.classList = '';\r\n        pomodoro.classList.add('pomodoro', `${theme.classList[1]}-border`);\r\n    });\r\n    hideModalSettings(modalSettings, settings);\r\n}\r\n\r\nfunction mainThemes() {\r\n    changeTheme(themes);\r\n    colorPicker();\r\n}\r\n\r\nwindow.onload = mainThemes();"]}