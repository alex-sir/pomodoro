let countdown;const timer=document.querySelector("#timer");let timerStarted=!1;const play=document.querySelector("#play"),pause=document.querySelector("#pause"),stop=document.querySelector("#stop"),reset=document.querySelector("#reset"),arrow=document.querySelectorAll(".arrow"),pomodoros=document.querySelectorAll(".pomodoro");let pomodorosCount=0;const sessionTitle=document.querySelector(".session-title h3"),increaseSession=document.querySelector("#increase-session"),sessionMinutes=document.querySelector("#session-minutes");let sessionSeconds=60*parseInt(sessionMinutes.textContent);const breakTitle=document.querySelector(".break-title h3"),decreaseSession=document.querySelector("#decrease-session"),increaseBreak=document.querySelector("#increase-break"),breakMinutes=document.querySelector("#break-minutes"),decreaseBreak=document.querySelector("#decrease-break");let customThemeSwitch=!0;const autoStart=document.querySelector("#auto-start"),notifications=document.querySelector("#notifications"),tabTitleTime=document.querySelector("#tab-title-time");let breakSelected=!1,sessionTimeSelected=!0,breakTimeSelected=!1,longBreak=15;const notificationIcon="favicon/android-chrome-192x192.png";function timerDisplay(e,t=!0,o){function s(){timerStarted||(timerStarted=!0),breakSelected&&4!==pomodorosCount&&!timerStarted&&(sessionSeconds=60*breakMinutes.textContent),e=sessionSeconds,clearInterval(countdown),autoStart.disabled=!0,play.disabled=!0,pause.disabled=!1,stop.disabled=!1,arrow.forEach(e=>{e.disabled=!0});const o=Date.now()+1e3*e;displayTimeLeft(e),countdown=setInterval(()=>{const e=Math.round((o-Date.now())/1e3);sessionSeconds-=1,e<1&&(clearInterval(countdown),autoStart.checked&&(currentActive=titleBorderChange(),4===pomodorosCount?(Push.create("Long break over!",{body:"Session started.",icon:notificationIcon}),breakSelected=!1,pomodorosCount=0,pomodoros.forEach(e=>{customThemeActive?e.setAttribute("style",`background-color: ${customValueBody}; border-color: ${customValueContent};`):e.classList.remove(`${currentActive.split("-")[0]}-background`)}),timerDisplay(sessionSeconds=60*parseInt(sessionMinutes.textContent),!0,!0)(),play.disabled=!1):t&&!breakSelected?(breakSelected=!0,pomodorosCount++,customThemeActive?pomodoros[pomodorosCount-1].setAttribute("style",`background-color: ${customValueContent}; border-color: ${customValueContent};`):pomodoros[pomodorosCount-1].classList.add(`${currentActive.split("-")[0]}-background`),4===pomodorosCount?(sessionSeconds=Math.min(60*longBreak,6e3),Push.create("Session over!",{body:"Long break started.",icon:notificationIcon})):(sessionSeconds=60*parseInt(breakMinutes.textContent),Push.create("Session over!",{body:"Break started.",icon:notificationIcon})),timerDisplay(sessionSeconds,!1,!0)(),play.disabled=!1):(Push.create("Break over!",{body:"Session started.",icon:notificationIcon}),breakSelected=!1,timerDisplay(sessionSeconds=60*parseInt(sessionMinutes.textContent),!0,!0)(),play.disabled=!1))),displayTimeLeft(e)},1e3)}if(o)return s;document.addEventListener("keydown",e=>{if(32===e.keyCode){if(e.repeat)return;pause.disabled?s():pauseTimer(pause,!1)()}}),play.addEventListener("click",s)}function sessionBreakSelect(e,t){function o(){timerStarted&&stopTimerHard(stop,sessionSeconds),breakSelected=!1,displayTimeLeft(sessionSeconds=60*parseInt(sessionMinutes.textContent),!1),timerDisplay(sessionSeconds,!0,!0),sessionTimeSelected||breakTimeSelected&&(breakTimeSelected=!1,sessionTimeSelected=!0,titleBorderChange())}function s(){timerStarted&&stopTimerHard(stop,sessionSeconds),breakSelected=!0,displayTimeLeft(sessionSeconds=60*parseInt(breakMinutes.textContent),!1),timerDisplay(sessionSeconds,!1,!0),breakTimeSelected||sessionTimeSelected&&(breakTimeSelected=!0,sessionTimeSelected=!1,titleBorderChange())}document.addEventListener("keydown",e=>{if(e.altKey&&80===e.keyCode){if(e.repeat)return;o()}}),e.addEventListener("click",o),document.addEventListener("keydown",e=>{if(e.altKey&&66===e.keyCode){if(e.repeat)return;s()}}),t.addEventListener("click",s)}function titleBorderChange(){let e;return customThemeActive?(sessionTitle.classList="",breakTitle.classList="",customThemeSwitch?(customThemeSwitch=!1,sessionTitle.style.background="",sessionTitle.style.backgroundSize="",sessionTitle.style.backgroundPosition="",breakTitle.style.background=`linear-gradient(to right, ${customValueContent}, ${customValueContent}) no-repeat`,breakTitle.style.backgroundSize="var(--pomodoro-size)",breakTitle.style.backgroundPosition="var(--pomodoro-position)"):(customThemeSwitch=!0,breakTitle.style.background="",breakTitle.style.backgroundSize="",breakTitle.style.backgroundPosition="",sessionTitle.style.background=`linear-gradient(to right, ${customValueContent}, ${customValueContent}) no-repeat`,sessionTitle.style.backgroundSize="var(--pomodoro-size)",sessionTitle.style.backgroundPosition="var(--pomodoro-position)")):(e=sessionTitle.classList.length>=1?sessionTitle.classList[sessionTitle.classList.length-1]:breakTitle.classList[breakTitle.classList.length-1],breakTitle.classList.toggle(e),sessionTitle.classList.toggle(e)),e}function timerSession(e,t,o,s=!0){function n(e=!1){parseInt(t.textContent)>=6e3||!s&&!breakSelected&&e||s&&breakSelected&&e||(t.textContent=parseInt(t.textContent)+1,s?(breakSelected||displayTimeLeft(60*parseInt(t.textContent),!1),sessionSeconds+=60):breakSelected&&(displayTimeLeft(60*parseInt(t.textContent),!1),sessionSeconds+=60),longBreak=3*parseInt(breakMinutes.textContent))}function i(e=!1){parseInt(t.textContent)<=1||!s&&!breakSelected&&e||s&&breakSelected&&e||(t.textContent=parseInt(t.textContent)-1,s?(breakSelected||displayTimeLeft(60*parseInt(t.textContent),!1),sessionSeconds-=60):breakSelected&&(displayTimeLeft(60*parseInt(t.textContent),!1),sessionSeconds-=60),longBreak=3*parseInt(breakMinutes.textContent))}e.addEventListener("click",()=>{n(!1)}),document.addEventListener("keydown",e=>{e.altKey&&38===e.keyCode&&!timerStarted&&n(!0)}),o.addEventListener("click",()=>{i(!1)}),document.addEventListener("keydown",e=>{e.altKey&&40===e.keyCode&&!timerStarted&&i(!0)})}function displayTimeLeft(e,t=!0){let o=Math.floor(e/60);const s=e%60;let n;if(o>=60){const e=Math.floor(o/60);o%=60,n=`${e<10?e.toString().padStart(2,0):e}:${o<10?o.toString().padStart(2,0):o}:${s<10?s.toString().padStart(2,0):s}`}else n=`${o<10?o.toString().padStart(2,0):o}:${s<10?s.toString().padStart(2,0):s}`;timer.textContent=n,t&&tabTitleTime.checked&&(document.title=`(${n}) Pomodoro`)}function pauseTimer(e,t){function o(){clearInterval(countdown),sessionTitle.classList>=1?timerDisplay(0,!0,!0):timerDisplay(0,!1,!0),e.disabled=!0,play.disabled=!1}if(!t)return o;e.disabled=!0,e.addEventListener("click",o)}function breakSessionTitleReset(){breakTitle.classList.length>=1?(sessionTitle.classList.add(breakTitle.classList[breakTitle.classList.length-1]),breakTitle.classList=""):customThemeActive&&(sessionTitle.style.background=`linear-gradient(to right, ${customValueContent}, ${customValueContent}) no-repeat`,sessionTitle.style.backgroundSize="var(--pomodoro-size)",sessionTitle.style.backgroundPosition="var(--pomodoro-position)",breakTitle.style.background="",customThemeSwitch=!0)}function stopTimer(e,t){function o(){t=breakSelected&&4!==pomodorosCount?60*parseInt(breakMinutes.textContent):4===pomodorosCount?60*longBreak:60*parseInt(sessionMinutes.textContent),timerStarted=!1,sessionSeconds=t,clearInterval(countdown),displayTimeLeft(t),e.disabled=!0,pause.disabled=!0,play.disabled=!1,autoStart.disabled=!1,arrow.forEach(e=>{e.disabled=!1}),document.title="Pomodoro",timerDisplay(t,!breakSelected,!0)}e.disabled=!0,document.addEventListener("keydown",e=>{if(e.altKey&&83===e.keyCode){if(e.repeat)return;o()}}),e.addEventListener("click",o)}function stopTimerHard(e,t){parseInt(sessionMinutes.textContent),timerStarted=!1,t=60*parseInt(sessionMinutes.textContent),sessionSeconds=t,clearInterval(countdown),displayTimeLeft(t),breakSessionTitleReset(),resetPomodoros(pomodoros),pomodorosCount=0,breakSelected=!1,sessionTimeSelected=!0,breakTimeSelected=!1,e.disabled=!0,pause.disabled=!0,play.disabled=!1,autoStart.disabled=!1,arrow.forEach(e=>{e.disabled=!1}),document.title="Pomodoro",timerDisplay(t,!0,!0)}function resetPomodoros(e){e.forEach(e=>{if(customThemeActive)e.classList="",e.classList.add("pomodoro"),e.style.backgroundColor="";else{const t=e.classList[1];e.classList="",e.classList.add("pomodoro",t)}})}function resetTimer(e){function t(){timerStarted=!1,clearInterval(countdown),timer.textContent="25:00",sessionMinutes.textContent="25",breakSessionTitleReset(),breakSelected=!1,sessionTimeSelected=!0,breakTimeSelected=!1,resetPomodoros(pomodoros),pomodorosCount=0,sessionSeconds=60*parseInt(sessionMinutes.textContent),breakMinutes.textContent="5",longBreak=15,arrow.forEach(e=>{e.disabled=!1}),play.disabled=!1,autoStart.disabled=!1,document.title="Pomodoro",timerDisplay(60*parseInt(timer.textContent.split(":")[0]),!0,!0)}document.addEventListener("keydown",e=>{if(e.altKey&&82===e.keyCode){if(e.repeat)return;t()}}),e.addEventListener("click",t)}function toggleNotifications(e){e.addEventListener("change",e=>{e.target.checked&&Push.Permission.request()})}function mainTimer(){timerDisplay(sessionSeconds,!0,!1),timerSession(increaseSession,sessionMinutes,decreaseSession,!0),timerSession(increaseBreak,breakMinutes,decreaseBreak,!1),sessionBreakSelect(sessionTitle,breakTitle),pauseTimer(pause,!0),stopTimer(stop,sessionSeconds),resetTimer(reset),toggleNotifications(notifications)}window.onload=mainTimer();const modalSettings=document.querySelector("#simple-modal-settings"),modalAbout=document.querySelector("#simple-modal-about"),modalBtnSettings=document.querySelector("#modal-btn-settings"),modalBtnAbout=document.querySelector("#modal-btn-about"),closeBtnSettings=document.querySelector("#close-btn-settings"),closeBtnAbout=document.querySelector("#close-btn-about"),settings=document.querySelector(".settings"),about=document.querySelector(".about");function modalDisplaySettings(e,t,o,s){t.addEventListener("click",()=>{e.style.visibility="visible",e.style.opacity="1",s.style.transform="rotate(90deg)",body.style.overflow="hidden",s.blur()}),o.addEventListener("click",()=>{hideModalSettings(e,s)}),window.addEventListener("click",function(t){t.target===e&&hideModalSettings(e,s)})}function hideModalSettings(e,t){e.style.opacity="0",setTimeout(()=>{e.style.visibility="hidden"},300),t.style.transform="rotate(0deg)",body.style.overflow="auto"}function modalDisplayAbout(e,t,o,s){t.addEventListener("click",()=>{e.style.visibility="visible",e.style.opacity="1",s.style.transform="scale(0.85)",body.style.overflow="hidden",s.blur()}),o.addEventListener("click",()=>{hideModalAbout(e)}),window.addEventListener("click",function(t){t.target===e&&hideModalAbout(e)})}function hideModalAbout(e){e.style.opacity="0",setTimeout(()=>{e.style.visibility="hidden"},300),about.style.transform="scale(1)",body.style.overflow="auto"}function mainModal(){modalDisplaySettings(modalSettings,modalBtnSettings,closeBtnSettings,settings),modalDisplayAbout(modalAbout,modalBtnAbout,closeBtnAbout,about)}window.onload=mainModal();const themes=document.querySelectorAll(".theme"),body=document.querySelector("body"),themeColor=document.querySelectorAll(".dark-color"),themeBackground=document.querySelectorAll(".dark-"),themeBorder=document.querySelectorAll(".dark-border");let themeActive=document.querySelector(".dark-active");const themeTitle=document.querySelector(".dark-title"),themeWarningBackground=document.querySelector(".theme-warning-background"),acceptRestart=document.querySelector("#accept-restart"),declineRestart=document.querySelector("#decline-restart");let customValueBody,customValueContent;const applyCustomTheme=document.querySelector("#apply-custom-theme");let customThemeActive=!1;function colorPicker(){$("#color-picker-body").spectrum({color:"#9032e0",showInput:!0,showInitial:!0,showAlpha:!0,preferredFormat:"hex"}),$("#color-picker-content").spectrum({color:"#57dca3",showInput:!0,showInitial:!0,showAlpha:!0,preferredFormat:"hex"}),customValueBody=$("#color-picker-body").spectrum("get"),customValueContent=$("#color-picker-content").spectrum("get"),$("#color-picker-body").on("change.spectrum",()=>{customValueBody=$("#color-picker-body").spectrum("get")}),$("#color-picker-content").on("change.spectrum",()=>{customValueContent=$("#color-picker-content").spectrum("get")}),applyCustomTheme.addEventListener("click",()=>{timerStarted||pomodorosCount>=1?timerRestartThemeCustom(acceptRestart,declineRestart,themeWarningBackground,customValueBody,customValueContent):(customThemeActive=!0,customThemeChanger(customValueBody,customValueContent),breakSelected&&titleBorderColor(!0))})}function customThemeChanger(e,t){body.setAttribute("style",`background-color: ${e}; color: ${t};`),themeColor.forEach(e=>{e.setAttribute("style",`color: ${t};`)}),themeBorder.forEach(e=>{e.setAttribute("style",`border-color: ${t}`)}),breakSelected?breakTitle.setAttribute("style",`background: linear-gradient(to right, ${t}, ${t}) no-repeat; background-size: 100% 1.5px; background-position: left bottom`):sessionTitle.setAttribute("style",`background: linear-gradient(to right, ${t}, ${t}) no-repeat; background-size: 100% 1.5px; background-position: left bottom`),themeTitle.setAttribute("style",`color: ${t}`),pomodoros.forEach(e=>{e.setAttribute("style",`border-color: ${t}`)}),hideModalSettings(modalSettings,settings)}function removeCustomTheme(e=!1){e&&(customThemeActive=!1),body.style.backgroundColor="",body.style.color="",themeColor.forEach(e=>{e.style.color=""}),themeBorder.forEach(e=>{e.style.borderColor=""}),breakTitle.style.background="",themeActive.style.background="",themeActive.style.backgroundSize="",themeActive.style.backgroundPosition="",themeTitle.style.color="",pomodoros.forEach(e=>{e.style.borderColor="",e.style.backgroundColor=""})}function timerRestartTheme(e,t,o,s){o.style.display="block",e.addEventListener("click",()=>{stopTimerHard(stop,sessionSeconds),executeChangeTheme(s,themeColor,themeBorder,themeActive,themeTitle,pomodoros,modalSettings),customThemeActive&&removeCustomTheme(!0),sessionTimeSelected=!0,breakTimeSelected=!1,breakSelected=!1,o.style.display="none"}),t.addEventListener("click",()=>{o.style.display="none"}),window.addEventListener("click",function(e){e.target===o&&(o.style.display="none")})}function timerRestartThemeCustom(e,t,o,s,n){o.style.display="block",e.addEventListener("click",()=>{customThemeActive=!0,removeCustomTheme(!1),stopTimerHard(stop,sessionSeconds),sessionTimeSelected=!0,breakTimeSelected=!1,breakSelected=!1,customThemeChanger(s,n),titleBorderColor(!0),o.style.display="none"}),t.addEventListener("click",()=>{o.style.display="none"}),window.addEventListener("click",function(e){e.target===o&&(o.style.display="none")})}function changeTheme(e){e.forEach(e=>{e.addEventListener("click",function(){timerStarted||pomodorosCount>=1?timerRestartTheme(acceptRestart,declineRestart,themeWarningBackground,e):(customThemeActive&&removeCustomTheme(!0),setTimeout(()=>{breakSelected&&titleBorderColor(!1)},0),executeChangeTheme(e,themeColor,themeBorder,themeActive,themeTitle,pomodoros,modalSettings))})})}function titleBorderColor(e){if(customThemeActive||e)e&&(customThemeSwitch=!breakSelected,sessionTitle.classList="",breakTitle.classList="");else{let e=sessionTitle.classList[sessionTitle.classList.length-1];breakTitle.classList="",breakTitle.classList.add(e),sessionTitle.classList=""}}function executeChangeTheme(e,t,o,s,n,i,r){body.classList="",body.classList.add(e.classList[1]),t.forEach(t=>{t.classList.remove(t.classList[t.classList.length-1]),t.classList.add(`${e.classList[1]}-color`)}),o.forEach(t=>{t.classList.remove(t.classList[t.classList.length-1]),t.classList.add(`${e.classList[1]}-border`)}),s.classList.remove(s.classList[s.classList.length-1]),s.classList.add(`${e.classList[1]}-active`),s=document.querySelector(`.${e.classList[1]}-active`),n.classList.remove(n.classList[n.classList.length-1]),n.classList.add(`${e.classList[1]}-title`),i.forEach(t=>{t.classList="",t.classList.add("pomodoro",`${e.classList[1]}-border`)}),hideModalSettings(r,settings)}function mainThemes(){changeTheme(themes),colorPicker()}window.onload=mainThemes();
//# sourceMappingURL=bundle.min.js.map
